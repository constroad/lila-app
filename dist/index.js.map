{
  "version": 3,
  "sources": ["../node_modules/dotenv/package.json", "../node_modules/dotenv/lib/main.js", "../node_modules/universalify/index.js", "../node_modules/graceful-fs/polyfills.js", "../node_modules/graceful-fs/legacy-streams.js", "../node_modules/graceful-fs/clone.js", "../node_modules/graceful-fs/graceful-fs.js", "../node_modules/fs-extra/lib/fs/index.js", "../node_modules/fs-extra/lib/mkdirs/utils.js", "../node_modules/fs-extra/lib/mkdirs/make-dir.js", "../node_modules/fs-extra/lib/mkdirs/index.js", "../node_modules/fs-extra/lib/path-exists/index.js", "../node_modules/fs-extra/lib/util/utimes.js", "../node_modules/fs-extra/lib/util/stat.js", "../node_modules/fs-extra/lib/util/async.js", "../node_modules/fs-extra/lib/copy/copy.js", "../node_modules/fs-extra/lib/copy/copy-sync.js", "../node_modules/fs-extra/lib/copy/index.js", "../node_modules/fs-extra/lib/remove/index.js", "../node_modules/fs-extra/lib/empty/index.js", "../node_modules/fs-extra/lib/ensure/file.js", "../node_modules/fs-extra/lib/ensure/link.js", "../node_modules/fs-extra/lib/ensure/symlink-paths.js", "../node_modules/fs-extra/lib/ensure/symlink-type.js", "../node_modules/fs-extra/lib/ensure/symlink.js", "../node_modules/fs-extra/lib/ensure/index.js", "../node_modules/jsonfile/utils.js", "../node_modules/jsonfile/index.js", "../node_modules/fs-extra/lib/json/jsonfile.js", "../node_modules/fs-extra/lib/output-file/index.js", "../node_modules/fs-extra/lib/json/output-json.js", "../node_modules/fs-extra/lib/json/output-json-sync.js", "../node_modules/fs-extra/lib/json/index.js", "../node_modules/fs-extra/lib/move/move.js", "../node_modules/fs-extra/lib/move/move-sync.js", "../node_modules/fs-extra/lib/move/index.js", "../node_modules/fs-extra/lib/index.js", "../src/index.ts", "../src/utils/logger.ts", "../src/config/environment.ts", "../src/api/middlewares/rateLimiter.ts", "../src/config/constants.ts", "../src/api/middlewares/errorHandler.ts", "../src/api/routes/session.routes.ts", "../src/whatsapp/baileys/connection.manager.ts", "../src/whatsapp/ai-agent/agent.service.ts", "../src/whatsapp/ai-agent/prompts/asphalt-sales.prompt.ts", "../src/whatsapp/ai-agent/conversation.manager.ts", "../src/storage/json.store.ts", "../src/utils/retry.ts", "../src/whatsapp/ai-agent/typing-simulator.ts", "../src/utils/validators.ts", "../src/whatsapp/ai-agent/message.listener.ts", "../src/api/controllers/session.controller.ts", "../src/api/routes/jobs.routes.ts", "../src/jobs/scheduler.service.ts", "../src/api/controllers/jobs.controller.ts", "../src/api/routes/message.routes.ts", "../src/api/controllers/message.controller.ts", "../src/api/routes/pdf.routes.ts", "../src/pdf/generator.service.ts", "../src/api/controllers/pdf.controller.ts"],
  "sourcesContent": ["{\n  \"name\": \"dotenv\",\n  \"version\": \"16.6.1\",\n  \"description\": \"Loads environment variables from .env file\",\n  \"main\": \"lib/main.js\",\n  \"types\": \"lib/main.d.ts\",\n  \"exports\": {\n    \".\": {\n      \"types\": \"./lib/main.d.ts\",\n      \"require\": \"./lib/main.js\",\n      \"default\": \"./lib/main.js\"\n    },\n    \"./config\": \"./config.js\",\n    \"./config.js\": \"./config.js\",\n    \"./lib/env-options\": \"./lib/env-options.js\",\n    \"./lib/env-options.js\": \"./lib/env-options.js\",\n    \"./lib/cli-options\": \"./lib/cli-options.js\",\n    \"./lib/cli-options.js\": \"./lib/cli-options.js\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"scripts\": {\n    \"dts-check\": \"tsc --project tests/types/tsconfig.json\",\n    \"lint\": \"standard\",\n    \"pretest\": \"npm run lint && npm run dts-check\",\n    \"test\": \"tap run --allow-empty-coverage --disable-coverage --timeout=60000\",\n    \"test:coverage\": \"tap run --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov\",\n    \"prerelease\": \"npm test\",\n    \"release\": \"standard-version\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/motdotla/dotenv.git\"\n  },\n  \"homepage\": \"https://github.com/motdotla/dotenv#readme\",\n  \"funding\": \"https://dotenvx.com\",\n  \"keywords\": [\n    \"dotenv\",\n    \"env\",\n    \".env\",\n    \"environment\",\n    \"variables\",\n    \"config\",\n    \"settings\"\n  ],\n  \"readmeFilename\": \"README.md\",\n  \"license\": \"BSD-2-Clause\",\n  \"devDependencies\": {\n    \"@types/node\": \"^18.11.3\",\n    \"decache\": \"^4.6.2\",\n    \"sinon\": \"^14.0.1\",\n    \"standard\": \"^17.0.0\",\n    \"standard-version\": \"^9.5.0\",\n    \"tap\": \"^19.2.0\",\n    \"typescript\": \"^4.8.4\"\n  },\n  \"engines\": {\n    \"node\": \">=12\"\n  },\n  \"browser\": {\n    \"fs\": false\n  }\n}\n", "const fs = require('fs')\nconst path = require('path')\nconst os = require('os')\nconst crypto = require('crypto')\nconst packageJson = require('../package.json')\n\nconst version = packageJson.version\n\nconst LINE = /(?:^|^)\\s*(?:export\\s+)?([\\w.-]+)(?:\\s*=\\s*?|:\\s+?)(\\s*'(?:\\\\'|[^'])*'|\\s*\"(?:\\\\\"|[^\"])*\"|\\s*`(?:\\\\`|[^`])*`|[^#\\r\\n]+)?\\s*(?:#.*)?(?:$|$)/mg\n\n// Parse src into an Object\nfunction parse (src) {\n  const obj = {}\n\n  // Convert buffer to string\n  let lines = src.toString()\n\n  // Convert line breaks to same format\n  lines = lines.replace(/\\r\\n?/mg, '\\n')\n\n  let match\n  while ((match = LINE.exec(lines)) != null) {\n    const key = match[1]\n\n    // Default undefined or null to empty string\n    let value = (match[2] || '')\n\n    // Remove whitespace\n    value = value.trim()\n\n    // Check if double quoted\n    const maybeQuote = value[0]\n\n    // Remove surrounding quotes\n    value = value.replace(/^(['\"`])([\\s\\S]*)\\1$/mg, '$2')\n\n    // Expand newlines if double quoted\n    if (maybeQuote === '\"') {\n      value = value.replace(/\\\\n/g, '\\n')\n      value = value.replace(/\\\\r/g, '\\r')\n    }\n\n    // Add to object\n    obj[key] = value\n  }\n\n  return obj\n}\n\nfunction _parseVault (options) {\n  options = options || {}\n\n  const vaultPath = _vaultPath(options)\n  options.path = vaultPath // parse .env.vault\n  const result = DotenvModule.configDotenv(options)\n  if (!result.parsed) {\n    const err = new Error(`MISSING_DATA: Cannot parse ${vaultPath} for an unknown reason`)\n    err.code = 'MISSING_DATA'\n    throw err\n  }\n\n  // handle scenario for comma separated keys - for use with key rotation\n  // example: DOTENV_KEY=\"dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=prod,dotenv://:key_7890@dotenvx.com/vault/.env.vault?environment=prod\"\n  const keys = _dotenvKey(options).split(',')\n  const length = keys.length\n\n  let decrypted\n  for (let i = 0; i < length; i++) {\n    try {\n      // Get full key\n      const key = keys[i].trim()\n\n      // Get instructions for decrypt\n      const attrs = _instructions(result, key)\n\n      // Decrypt\n      decrypted = DotenvModule.decrypt(attrs.ciphertext, attrs.key)\n\n      break\n    } catch (error) {\n      // last key\n      if (i + 1 >= length) {\n        throw error\n      }\n      // try next key\n    }\n  }\n\n  // Parse decrypted .env string\n  return DotenvModule.parse(decrypted)\n}\n\nfunction _warn (message) {\n  console.log(`[dotenv@${version}][WARN] ${message}`)\n}\n\nfunction _debug (message) {\n  console.log(`[dotenv@${version}][DEBUG] ${message}`)\n}\n\nfunction _log (message) {\n  console.log(`[dotenv@${version}] ${message}`)\n}\n\nfunction _dotenvKey (options) {\n  // prioritize developer directly setting options.DOTENV_KEY\n  if (options && options.DOTENV_KEY && options.DOTENV_KEY.length > 0) {\n    return options.DOTENV_KEY\n  }\n\n  // secondary infra already contains a DOTENV_KEY environment variable\n  if (process.env.DOTENV_KEY && process.env.DOTENV_KEY.length > 0) {\n    return process.env.DOTENV_KEY\n  }\n\n  // fallback to empty string\n  return ''\n}\n\nfunction _instructions (result, dotenvKey) {\n  // Parse DOTENV_KEY. Format is a URI\n  let uri\n  try {\n    uri = new URL(dotenvKey)\n  } catch (error) {\n    if (error.code === 'ERR_INVALID_URL') {\n      const err = new Error('INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development')\n      err.code = 'INVALID_DOTENV_KEY'\n      throw err\n    }\n\n    throw error\n  }\n\n  // Get decrypt key\n  const key = uri.password\n  if (!key) {\n    const err = new Error('INVALID_DOTENV_KEY: Missing key part')\n    err.code = 'INVALID_DOTENV_KEY'\n    throw err\n  }\n\n  // Get environment\n  const environment = uri.searchParams.get('environment')\n  if (!environment) {\n    const err = new Error('INVALID_DOTENV_KEY: Missing environment part')\n    err.code = 'INVALID_DOTENV_KEY'\n    throw err\n  }\n\n  // Get ciphertext payload\n  const environmentKey = `DOTENV_VAULT_${environment.toUpperCase()}`\n  const ciphertext = result.parsed[environmentKey] // DOTENV_VAULT_PRODUCTION\n  if (!ciphertext) {\n    const err = new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${environmentKey} in your .env.vault file.`)\n    err.code = 'NOT_FOUND_DOTENV_ENVIRONMENT'\n    throw err\n  }\n\n  return { ciphertext, key }\n}\n\nfunction _vaultPath (options) {\n  let possibleVaultPath = null\n\n  if (options && options.path && options.path.length > 0) {\n    if (Array.isArray(options.path)) {\n      for (const filepath of options.path) {\n        if (fs.existsSync(filepath)) {\n          possibleVaultPath = filepath.endsWith('.vault') ? filepath : `${filepath}.vault`\n        }\n      }\n    } else {\n      possibleVaultPath = options.path.endsWith('.vault') ? options.path : `${options.path}.vault`\n    }\n  } else {\n    possibleVaultPath = path.resolve(process.cwd(), '.env.vault')\n  }\n\n  if (fs.existsSync(possibleVaultPath)) {\n    return possibleVaultPath\n  }\n\n  return null\n}\n\nfunction _resolveHome (envPath) {\n  return envPath[0] === '~' ? path.join(os.homedir(), envPath.slice(1)) : envPath\n}\n\nfunction _configVault (options) {\n  const debug = Boolean(options && options.debug)\n  const quiet = options && 'quiet' in options ? options.quiet : true\n\n  if (debug || !quiet) {\n    _log('Loading env from encrypted .env.vault')\n  }\n\n  const parsed = DotenvModule._parseVault(options)\n\n  let processEnv = process.env\n  if (options && options.processEnv != null) {\n    processEnv = options.processEnv\n  }\n\n  DotenvModule.populate(processEnv, parsed, options)\n\n  return { parsed }\n}\n\nfunction configDotenv (options) {\n  const dotenvPath = path.resolve(process.cwd(), '.env')\n  let encoding = 'utf8'\n  const debug = Boolean(options && options.debug)\n  const quiet = options && 'quiet' in options ? options.quiet : true\n\n  if (options && options.encoding) {\n    encoding = options.encoding\n  } else {\n    if (debug) {\n      _debug('No encoding is specified. UTF-8 is used by default')\n    }\n  }\n\n  let optionPaths = [dotenvPath] // default, look for .env\n  if (options && options.path) {\n    if (!Array.isArray(options.path)) {\n      optionPaths = [_resolveHome(options.path)]\n    } else {\n      optionPaths = [] // reset default\n      for (const filepath of options.path) {\n        optionPaths.push(_resolveHome(filepath))\n      }\n    }\n  }\n\n  // Build the parsed data in a temporary object (because we need to return it).  Once we have the final\n  // parsed data, we will combine it with process.env (or options.processEnv if provided).\n  let lastError\n  const parsedAll = {}\n  for (const path of optionPaths) {\n    try {\n      // Specifying an encoding returns a string instead of a buffer\n      const parsed = DotenvModule.parse(fs.readFileSync(path, { encoding }))\n\n      DotenvModule.populate(parsedAll, parsed, options)\n    } catch (e) {\n      if (debug) {\n        _debug(`Failed to load ${path} ${e.message}`)\n      }\n      lastError = e\n    }\n  }\n\n  let processEnv = process.env\n  if (options && options.processEnv != null) {\n    processEnv = options.processEnv\n  }\n\n  DotenvModule.populate(processEnv, parsedAll, options)\n\n  if (debug || !quiet) {\n    const keysCount = Object.keys(parsedAll).length\n    const shortPaths = []\n    for (const filePath of optionPaths) {\n      try {\n        const relative = path.relative(process.cwd(), filePath)\n        shortPaths.push(relative)\n      } catch (e) {\n        if (debug) {\n          _debug(`Failed to load ${filePath} ${e.message}`)\n        }\n        lastError = e\n      }\n    }\n\n    _log(`injecting env (${keysCount}) from ${shortPaths.join(',')}`)\n  }\n\n  if (lastError) {\n    return { parsed: parsedAll, error: lastError }\n  } else {\n    return { parsed: parsedAll }\n  }\n}\n\n// Populates process.env from .env file\nfunction config (options) {\n  // fallback to original dotenv if DOTENV_KEY is not set\n  if (_dotenvKey(options).length === 0) {\n    return DotenvModule.configDotenv(options)\n  }\n\n  const vaultPath = _vaultPath(options)\n\n  // dotenvKey exists but .env.vault file does not exist\n  if (!vaultPath) {\n    _warn(`You set DOTENV_KEY but you are missing a .env.vault file at ${vaultPath}. Did you forget to build it?`)\n\n    return DotenvModule.configDotenv(options)\n  }\n\n  return DotenvModule._configVault(options)\n}\n\nfunction decrypt (encrypted, keyStr) {\n  const key = Buffer.from(keyStr.slice(-64), 'hex')\n  let ciphertext = Buffer.from(encrypted, 'base64')\n\n  const nonce = ciphertext.subarray(0, 12)\n  const authTag = ciphertext.subarray(-16)\n  ciphertext = ciphertext.subarray(12, -16)\n\n  try {\n    const aesgcm = crypto.createDecipheriv('aes-256-gcm', key, nonce)\n    aesgcm.setAuthTag(authTag)\n    return `${aesgcm.update(ciphertext)}${aesgcm.final()}`\n  } catch (error) {\n    const isRange = error instanceof RangeError\n    const invalidKeyLength = error.message === 'Invalid key length'\n    const decryptionFailed = error.message === 'Unsupported state or unable to authenticate data'\n\n    if (isRange || invalidKeyLength) {\n      const err = new Error('INVALID_DOTENV_KEY: It must be 64 characters long (or more)')\n      err.code = 'INVALID_DOTENV_KEY'\n      throw err\n    } else if (decryptionFailed) {\n      const err = new Error('DECRYPTION_FAILED: Please check your DOTENV_KEY')\n      err.code = 'DECRYPTION_FAILED'\n      throw err\n    } else {\n      throw error\n    }\n  }\n}\n\n// Populate process.env with parsed values\nfunction populate (processEnv, parsed, options = {}) {\n  const debug = Boolean(options && options.debug)\n  const override = Boolean(options && options.override)\n\n  if (typeof parsed !== 'object') {\n    const err = new Error('OBJECT_REQUIRED: Please check the processEnv argument being passed to populate')\n    err.code = 'OBJECT_REQUIRED'\n    throw err\n  }\n\n  // Set process.env\n  for (const key of Object.keys(parsed)) {\n    if (Object.prototype.hasOwnProperty.call(processEnv, key)) {\n      if (override === true) {\n        processEnv[key] = parsed[key]\n      }\n\n      if (debug) {\n        if (override === true) {\n          _debug(`\"${key}\" is already defined and WAS overwritten`)\n        } else {\n          _debug(`\"${key}\" is already defined and was NOT overwritten`)\n        }\n      }\n    } else {\n      processEnv[key] = parsed[key]\n    }\n  }\n}\n\nconst DotenvModule = {\n  configDotenv,\n  _configVault,\n  _parseVault,\n  config,\n  decrypt,\n  parse,\n  populate\n}\n\nmodule.exports.configDotenv = DotenvModule.configDotenv\nmodule.exports._configVault = DotenvModule._configVault\nmodule.exports._parseVault = DotenvModule._parseVault\nmodule.exports.config = DotenvModule.config\nmodule.exports.decrypt = DotenvModule.decrypt\nmodule.exports.parse = DotenvModule.parse\nmodule.exports.populate = DotenvModule.populate\n\nmodule.exports = DotenvModule\n", "'use strict'\n\nexports.fromCallback = function (fn) {\n  return Object.defineProperty(function (...args) {\n    if (typeof args[args.length - 1] === 'function') fn.apply(this, args)\n    else {\n      return new Promise((resolve, reject) => {\n        args.push((err, res) => (err != null) ? reject(err) : resolve(res))\n        fn.apply(this, args)\n      })\n    }\n  }, 'name', { value: fn.name })\n}\n\nexports.fromPromise = function (fn) {\n  return Object.defineProperty(function (...args) {\n    const cb = args[args.length - 1]\n    if (typeof cb !== 'function') return fn.apply(this, args)\n    else {\n      args.pop()\n      fn.apply(this, args).then(r => cb(null, r), cb)\n    }\n  }, 'name', { value: fn.name })\n}\n", "var constants = require('constants')\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\n// This check is needed until node.js 12 is required\nif (typeof process.chdir === 'function') {\n  var chdir = process.chdir\n  process.chdir = function (d) {\n    cwd = null\n    chdir.call(process, d)\n  }\n  if (Object.setPrototypeOf) Object.setPrototypeOf(process.chdir, chdir)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (fs.chmod && !fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (fs.chown && !fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = typeof fs.rename !== 'function' ? fs.rename\n    : (function (fs$rename) {\n      function rename (from, to, cb) {\n        var start = Date.now()\n        var backoff = 0;\n        fs$rename(from, to, function CB (er) {\n          if (er\n              && (er.code === \"EACCES\" || er.code === \"EPERM\" || er.code === \"EBUSY\")\n              && Date.now() - start < 60000) {\n            setTimeout(function() {\n              fs.stat(to, function (stater, st) {\n                if (stater && stater.code === \"ENOENT\")\n                  fs$rename(from, to, CB);\n                else\n                  cb(er)\n              })\n            }, backoff)\n            if (backoff < 100)\n              backoff += 10;\n            return;\n          }\n          if (cb) cb(er)\n        })\n      }\n      if (Object.setPrototypeOf) Object.setPrototypeOf(rename, fs$rename)\n      return rename\n    })(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = typeof fs.read !== 'function' ? fs.read\n  : (function (fs$read) {\n    function read (fd, buffer, offset, length, position, callback_) {\n      var callback\n      if (callback_ && typeof callback_ === 'function') {\n        var eagCounter = 0\n        callback = function (er, _, __) {\n          if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n            eagCounter ++\n            return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n          }\n          callback_.apply(this, arguments)\n        }\n      }\n      return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n    }\n\n    // This ensures `util.promisify` works as it does for native `fs.read`.\n    if (Object.setPrototypeOf) Object.setPrototypeOf(read, fs$read)\n    return read\n  })(fs.read)\n\n  fs.readSync = typeof fs.readSync !== 'function' ? fs.readSync\n  : (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\") && fs.futimes) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else if (fs.futimes) {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options, cb) {\n      if (typeof options === 'function') {\n        cb = options\n        options = null\n      }\n      function callback (er, stats) {\n        if (stats) {\n          if (stats.uid < 0) stats.uid += 0x100000000\n          if (stats.gid < 0) stats.gid += 0x100000000\n        }\n        if (cb) cb.apply(this, arguments)\n      }\n      return options ? orig.call(fs, target, options, callback)\n        : orig.call(fs, target, callback)\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options) {\n      var stats = options ? orig.call(fs, target, options)\n        : orig.call(fs, target)\n      if (stats) {\n        if (stats.uid < 0) stats.uid += 0x100000000\n        if (stats.gid < 0) stats.gid += 0x100000000\n      }\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n", "var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n", "'use strict'\n\nmodule.exports = clone\n\nvar getPrototypeOf = Object.getPrototypeOf || function (obj) {\n  return obj.__proto__\n}\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: getPrototypeOf(obj) }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n", "var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar util = require('util')\n\n/* istanbul ignore next - node 0.x polyfill */\nvar gracefulQueue\nvar previousSymbol\n\n/* istanbul ignore else - node 0.x polyfill */\nif (typeof Symbol === 'function' && typeof Symbol.for === 'function') {\n  gracefulQueue = Symbol.for('graceful-fs.queue')\n  // This is used in testing by future versions\n  previousSymbol = Symbol.for('graceful-fs.previous')\n} else {\n  gracefulQueue = '___graceful-fs.queue'\n  previousSymbol = '___graceful-fs.previous'\n}\n\nfunction noop () {}\n\nfunction publishQueue(context, queue) {\n  Object.defineProperty(context, gracefulQueue, {\n    get: function() {\n      return queue\n    }\n  })\n}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\n// Once time initialization\nif (!fs[gracefulQueue]) {\n  // This queue can be shared by multiple loaded instances\n  var queue = global[gracefulQueue] || []\n  publishQueue(fs, queue)\n\n  // Patch fs.close/closeSync to shared queue version, because we need\n  // to retry() whenever a close happens *anywhere* in the program.\n  // This is essential when multiple graceful-fs instances are\n  // in play at the same time.\n  fs.close = (function (fs$close) {\n    function close (fd, cb) {\n      return fs$close.call(fs, fd, function (err) {\n        // This function uses the graceful-fs shared queue\n        if (!err) {\n          resetQueue()\n        }\n\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n      })\n    }\n\n    Object.defineProperty(close, previousSymbol, {\n      value: fs$close\n    })\n    return close\n  })(fs.close)\n\n  fs.closeSync = (function (fs$closeSync) {\n    function closeSync (fd) {\n      // This function uses the graceful-fs shared queue\n      fs$closeSync.apply(fs, arguments)\n      resetQueue()\n    }\n\n    Object.defineProperty(closeSync, previousSymbol, {\n      value: fs$closeSync\n    })\n    return closeSync\n  })(fs.closeSync)\n\n  if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n    process.on('exit', function() {\n      debug(fs[gracefulQueue])\n      require('assert').equal(fs[gracefulQueue].length, 0)\n    })\n  }\n}\n\nif (!global[gracefulQueue]) {\n  publishQueue(global, fs[gracefulQueue]);\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb, startTime) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb, startTime) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb, startTime) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$copyFile = fs.copyFile\n  if (fs$copyFile)\n    fs.copyFile = copyFile\n  function copyFile (src, dest, flags, cb) {\n    if (typeof flags === 'function') {\n      cb = flags\n      flags = 0\n    }\n    return go$copyFile(src, dest, flags, cb)\n\n    function go$copyFile (src, dest, flags, cb, startTime) {\n      return fs$copyFile(src, dest, flags, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$copyFile, [src, dest, flags, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  var noReaddirOptionVersions = /^v[0-5]\\./\n  function readdir (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    var go$readdir = noReaddirOptionVersions.test(process.version)\n      ? function go$readdir (path, options, cb, startTime) {\n        return fs$readdir(path, fs$readdirCallback(\n          path, options, cb, startTime\n        ))\n      }\n      : function go$readdir (path, options, cb, startTime) {\n        return fs$readdir(path, options, fs$readdirCallback(\n          path, options, cb, startTime\n        ))\n      }\n\n    return go$readdir(path, options, cb)\n\n    function fs$readdirCallback (path, options, cb, startTime) {\n      return function (err, files) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([\n            go$readdir,\n            [path, options, cb],\n            err,\n            startTime || Date.now(),\n            Date.now()\n          ])\n        else {\n          if (files && files.sort)\n            files.sort()\n\n          if (typeof cb === 'function')\n            cb.call(this, err, files)\n        }\n      }\n    }\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  Object.defineProperty(fs, 'ReadStream', {\n    get: function () {\n      return ReadStream\n    },\n    set: function (val) {\n      ReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  Object.defineProperty(fs, 'WriteStream', {\n    get: function () {\n      return WriteStream\n    },\n    set: function (val) {\n      WriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  // legacy names\n  var FileReadStream = ReadStream\n  Object.defineProperty(fs, 'FileReadStream', {\n    get: function () {\n      return FileReadStream\n    },\n    set: function (val) {\n      FileReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  var FileWriteStream = WriteStream\n  Object.defineProperty(fs, 'FileWriteStream', {\n    get: function () {\n      return FileWriteStream\n    },\n    set: function (val) {\n      FileWriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new fs.ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new fs.WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb, startTime) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  fs[gracefulQueue].push(elem)\n  retry()\n}\n\n// keep track of the timeout between retry() calls\nvar retryTimer\n\n// reset the startTime and lastTime to now\n// this resets the start of the 60 second overall timeout as well as the\n// delay between attempts so that we'll retry these jobs sooner\nfunction resetQueue () {\n  var now = Date.now()\n  for (var i = 0; i < fs[gracefulQueue].length; ++i) {\n    // entries that are only a length of 2 are from an older version, don't\n    // bother modifying those since they'll be retried anyway.\n    if (fs[gracefulQueue][i].length > 2) {\n      fs[gracefulQueue][i][3] = now // startTime\n      fs[gracefulQueue][i][4] = now // lastTime\n    }\n  }\n  // call retry to make sure we're actively processing the queue\n  retry()\n}\n\nfunction retry () {\n  // clear the timer and remove it to help prevent unintended concurrency\n  clearTimeout(retryTimer)\n  retryTimer = undefined\n\n  if (fs[gracefulQueue].length === 0)\n    return\n\n  var elem = fs[gracefulQueue].shift()\n  var fn = elem[0]\n  var args = elem[1]\n  // these items may be unset if they were added by an older graceful-fs\n  var err = elem[2]\n  var startTime = elem[3]\n  var lastTime = elem[4]\n\n  // if we don't have a startTime we have no way of knowing if we've waited\n  // long enough, so go ahead and retry this item now\n  if (startTime === undefined) {\n    debug('RETRY', fn.name, args)\n    fn.apply(null, args)\n  } else if (Date.now() - startTime >= 60000) {\n    // it's been more than 60 seconds total, bail now\n    debug('TIMEOUT', fn.name, args)\n    var cb = args.pop()\n    if (typeof cb === 'function')\n      cb.call(null, err)\n  } else {\n    // the amount of time between the last attempt and right now\n    var sinceAttempt = Date.now() - lastTime\n    // the amount of time between when we first tried, and when we last tried\n    // rounded up to at least 1\n    var sinceStart = Math.max(lastTime - startTime, 1)\n    // backoff. wait longer than the total time we've been retrying, but only\n    // up to a maximum of 100ms\n    var desiredDelay = Math.min(sinceStart * 1.2, 100)\n    // it's been long enough since the last retry, do it again\n    if (sinceAttempt >= desiredDelay) {\n      debug('RETRY', fn.name, args)\n      fn.apply(null, args.concat([startTime]))\n    } else {\n      // if we can't do this job yet, push it to the end of the queue\n      // and let the next iteration check again\n      fs[gracefulQueue].push(elem)\n    }\n  }\n\n  // schedule our next run if one isn't already scheduled\n  if (retryTimer === undefined) {\n    retryTimer = setTimeout(retry, 0)\n  }\n}\n", "'use strict'\n// This is adapted from https://github.com/normalize/mz\n// Copyright (c) 2014-2016 Jonathan Ong me@jongleberry.com and Contributors\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\n\nconst api = [\n  'access',\n  'appendFile',\n  'chmod',\n  'chown',\n  'close',\n  'copyFile',\n  'cp',\n  'fchmod',\n  'fchown',\n  'fdatasync',\n  'fstat',\n  'fsync',\n  'ftruncate',\n  'futimes',\n  'glob',\n  'lchmod',\n  'lchown',\n  'lutimes',\n  'link',\n  'lstat',\n  'mkdir',\n  'mkdtemp',\n  'open',\n  'opendir',\n  'readdir',\n  'readFile',\n  'readlink',\n  'realpath',\n  'rename',\n  'rm',\n  'rmdir',\n  'stat',\n  'statfs',\n  'symlink',\n  'truncate',\n  'unlink',\n  'utimes',\n  'writeFile'\n].filter(key => {\n  // Some commands are not available on some systems. Ex:\n  // fs.cp was added in Node.js v16.7.0\n  // fs.statfs was added in Node v19.6.0, v18.15.0\n  // fs.glob was added in Node.js v22.0.0\n  // fs.lchown is not available on at least some Linux\n  return typeof fs[key] === 'function'\n})\n\n// Export cloned fs:\nObject.assign(exports, fs)\n\n// Universalify async methods:\napi.forEach(method => {\n  exports[method] = u(fs[method])\n})\n\n// We differ from mz/fs in that we still ship the old, broken, fs.exists()\n// since we are a drop-in replacement for the native module\nexports.exists = function (filename, callback) {\n  if (typeof callback === 'function') {\n    return fs.exists(filename, callback)\n  }\n  return new Promise(resolve => {\n    return fs.exists(filename, resolve)\n  })\n}\n\n// fs.read(), fs.write(), fs.readv(), & fs.writev() need special treatment due to multiple callback args\n\nexports.read = function (fd, buffer, offset, length, position, callback) {\n  if (typeof callback === 'function') {\n    return fs.read(fd, buffer, offset, length, position, callback)\n  }\n  return new Promise((resolve, reject) => {\n    fs.read(fd, buffer, offset, length, position, (err, bytesRead, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesRead, buffer })\n    })\n  })\n}\n\n// Function signature can be\n// fs.write(fd, buffer[, offset[, length[, position]]], callback)\n// OR\n// fs.write(fd, string[, position[, encoding]], callback)\n// We need to handle both cases, so we use ...args\nexports.write = function (fd, buffer, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.write(fd, buffer, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.write(fd, buffer, ...args, (err, bytesWritten, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesWritten, buffer })\n    })\n  })\n}\n\n// Function signature is\n// s.readv(fd, buffers[, position], callback)\n// We need to handle the optional arg, so we use ...args\nexports.readv = function (fd, buffers, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.readv(fd, buffers, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.readv(fd, buffers, ...args, (err, bytesRead, buffers) => {\n      if (err) return reject(err)\n      resolve({ bytesRead, buffers })\n    })\n  })\n}\n\n// Function signature is\n// s.writev(fd, buffers[, position], callback)\n// We need to handle the optional arg, so we use ...args\nexports.writev = function (fd, buffers, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.writev(fd, buffers, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.writev(fd, buffers, ...args, (err, bytesWritten, buffers) => {\n      if (err) return reject(err)\n      resolve({ bytesWritten, buffers })\n    })\n  })\n}\n\n// fs.realpath.native sometimes not available if fs is monkey-patched\nif (typeof fs.realpath.native === 'function') {\n  exports.realpath.native = u(fs.realpath.native)\n} else {\n  process.emitWarning(\n    'fs.realpath.native is not a function. Is fs being monkey-patched?',\n    'Warning', 'fs-extra-WARN0003'\n  )\n}\n", "// Adapted from https://github.com/sindresorhus/make-dir\n// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict'\nconst path = require('path')\n\n// https://github.com/nodejs/node/issues/8987\n// https://github.com/libuv/libuv/pull/1088\nmodule.exports.checkPath = function checkPath (pth) {\n  if (process.platform === 'win32') {\n    const pathHasInvalidWinCharacters = /[<>:\"|?*]/.test(pth.replace(path.parse(pth).root, ''))\n\n    if (pathHasInvalidWinCharacters) {\n      const error = new Error(`Path contains invalid characters: ${pth}`)\n      error.code = 'EINVAL'\n      throw error\n    }\n  }\n}\n", "'use strict'\nconst fs = require('../fs')\nconst { checkPath } = require('./utils')\n\nconst getMode = options => {\n  const defaults = { mode: 0o777 }\n  if (typeof options === 'number') return options\n  return ({ ...defaults, ...options }).mode\n}\n\nmodule.exports.makeDir = async (dir, options) => {\n  checkPath(dir)\n\n  return fs.mkdir(dir, {\n    mode: getMode(options),\n    recursive: true\n  })\n}\n\nmodule.exports.makeDirSync = (dir, options) => {\n  checkPath(dir)\n\n  return fs.mkdirSync(dir, {\n    mode: getMode(options),\n    recursive: true\n  })\n}\n", "'use strict'\nconst u = require('universalify').fromPromise\nconst { makeDir: _makeDir, makeDirSync } = require('./make-dir')\nconst makeDir = u(_makeDir)\n\nmodule.exports = {\n  mkdirs: makeDir,\n  mkdirsSync: makeDirSync,\n  // alias\n  mkdirp: makeDir,\n  mkdirpSync: makeDirSync,\n  ensureDir: makeDir,\n  ensureDirSync: makeDirSync\n}\n", "'use strict'\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\n\nfunction pathExists (path) {\n  return fs.access(path).then(() => true).catch(() => false)\n}\n\nmodule.exports = {\n  pathExists: u(pathExists),\n  pathExistsSync: fs.existsSync\n}\n", "'use strict'\n\nconst fs = require('../fs')\nconst u = require('universalify').fromPromise\n\nasync function utimesMillis (path, atime, mtime) {\n  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)\n  const fd = await fs.open(path, 'r+')\n\n  let closeErr = null\n\n  try {\n    await fs.futimes(fd, atime, mtime)\n  } finally {\n    try {\n      await fs.close(fd)\n    } catch (e) {\n      closeErr = e\n    }\n  }\n\n  if (closeErr) {\n    throw closeErr\n  }\n}\n\nfunction utimesMillisSync (path, atime, mtime) {\n  const fd = fs.openSync(path, 'r+')\n  fs.futimesSync(fd, atime, mtime)\n  return fs.closeSync(fd)\n}\n\nmodule.exports = {\n  utimesMillis: u(utimesMillis),\n  utimesMillisSync\n}\n", "'use strict'\n\nconst fs = require('../fs')\nconst path = require('path')\nconst u = require('universalify').fromPromise\n\nfunction getStats (src, dest, opts) {\n  const statFunc = opts.dereference\n    ? (file) => fs.stat(file, { bigint: true })\n    : (file) => fs.lstat(file, { bigint: true })\n  return Promise.all([\n    statFunc(src),\n    statFunc(dest).catch(err => {\n      if (err.code === 'ENOENT') return null\n      throw err\n    })\n  ]).then(([srcStat, destStat]) => ({ srcStat, destStat }))\n}\n\nfunction getStatsSync (src, dest, opts) {\n  let destStat\n  const statFunc = opts.dereference\n    ? (file) => fs.statSync(file, { bigint: true })\n    : (file) => fs.lstatSync(file, { bigint: true })\n  const srcStat = statFunc(src)\n  try {\n    destStat = statFunc(dest)\n  } catch (err) {\n    if (err.code === 'ENOENT') return { srcStat, destStat: null }\n    throw err\n  }\n  return { srcStat, destStat }\n}\n\nasync function checkPaths (src, dest, funcName, opts) {\n  const { srcStat, destStat } = await getStats(src, dest, opts)\n  if (destStat) {\n    if (areIdentical(srcStat, destStat)) {\n      const srcBaseName = path.basename(src)\n      const destBaseName = path.basename(dest)\n      if (funcName === 'move' &&\n        srcBaseName !== destBaseName &&\n        srcBaseName.toLowerCase() === destBaseName.toLowerCase()) {\n        return { srcStat, destStat, isChangingCase: true }\n      }\n      throw new Error('Source and destination must not be the same.')\n    }\n    if (srcStat.isDirectory() && !destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`)\n    }\n    if (!srcStat.isDirectory() && destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite directory '${dest}' with non-directory '${src}'.`)\n    }\n  }\n\n  if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n\n  return { srcStat, destStat }\n}\n\nfunction checkPathsSync (src, dest, funcName, opts) {\n  const { srcStat, destStat } = getStatsSync(src, dest, opts)\n\n  if (destStat) {\n    if (areIdentical(srcStat, destStat)) {\n      const srcBaseName = path.basename(src)\n      const destBaseName = path.basename(dest)\n      if (funcName === 'move' &&\n        srcBaseName !== destBaseName &&\n        srcBaseName.toLowerCase() === destBaseName.toLowerCase()) {\n        return { srcStat, destStat, isChangingCase: true }\n      }\n      throw new Error('Source and destination must not be the same.')\n    }\n    if (srcStat.isDirectory() && !destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`)\n    }\n    if (!srcStat.isDirectory() && destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite directory '${dest}' with non-directory '${src}'.`)\n    }\n  }\n\n  if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return { srcStat, destStat }\n}\n\n// recursively check if dest parent is a subdirectory of src.\n// It works for all file types including symlinks since it\n// checks the src and dest inodes. It starts from the deepest\n// parent and stops once it reaches the src parent or the root path.\nasync function checkParentPaths (src, srcStat, dest, funcName) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return\n\n  let destStat\n  try {\n    destStat = await fs.stat(destParent, { bigint: true })\n  } catch (err) {\n    if (err.code === 'ENOENT') return\n    throw err\n  }\n\n  if (areIdentical(srcStat, destStat)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n\n  return checkParentPaths(src, srcStat, destParent, funcName)\n}\n\nfunction checkParentPathsSync (src, srcStat, dest, funcName) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return\n  let destStat\n  try {\n    destStat = fs.statSync(destParent, { bigint: true })\n  } catch (err) {\n    if (err.code === 'ENOENT') return\n    throw err\n  }\n  if (areIdentical(srcStat, destStat)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return checkParentPathsSync(src, srcStat, destParent, funcName)\n}\n\nfunction areIdentical (srcStat, destStat) {\n  // stat.dev can be 0n on windows when node version >= 22.x.x\n  return destStat.ino !== undefined && destStat.dev !== undefined && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev\n}\n\n// return true if dest is a subdir of src, otherwise false.\n// It only checks the path strings.\nfunction isSrcSubdir (src, dest) {\n  const srcArr = path.resolve(src).split(path.sep).filter(i => i)\n  const destArr = path.resolve(dest).split(path.sep).filter(i => i)\n  return srcArr.every((cur, i) => destArr[i] === cur)\n}\n\nfunction errMsg (src, dest, funcName) {\n  return `Cannot ${funcName} '${src}' to a subdirectory of itself, '${dest}'.`\n}\n\nmodule.exports = {\n  // checkPaths\n  checkPaths: u(checkPaths),\n  checkPathsSync,\n  // checkParent\n  checkParentPaths: u(checkParentPaths),\n  checkParentPathsSync,\n  // Misc\n  isSrcSubdir,\n  areIdentical\n}\n", "'use strict'\n\n// https://github.com/jprichardson/node-fs-extra/issues/1056\n// Performing parallel operations on each item of an async iterator is\n// surprisingly hard; you need to have handlers in place to avoid getting an\n// UnhandledPromiseRejectionWarning.\n// NOTE: This function does not presently handle return values, only errors\nasync function asyncIteratorConcurrentProcess (iterator, fn) {\n  const promises = []\n  for await (const item of iterator) {\n    promises.push(\n      fn(item).then(\n        () => null,\n        (err) => err ?? new Error('unknown error')\n      )\n    )\n  }\n  await Promise.all(\n    promises.map((promise) =>\n      promise.then((possibleErr) => {\n        if (possibleErr !== null) throw possibleErr\n      })\n    )\n  )\n}\n\nmodule.exports = {\n  asyncIteratorConcurrentProcess\n}\n", "'use strict'\n\nconst fs = require('../fs')\nconst path = require('path')\nconst { mkdirs } = require('../mkdirs')\nconst { pathExists } = require('../path-exists')\nconst { utimesMillis } = require('../util/utimes')\nconst stat = require('../util/stat')\nconst { asyncIteratorConcurrentProcess } = require('../util/async')\n\nasync function copy (src, dest, opts = {}) {\n  if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    process.emitWarning(\n      'Using the preserveTimestamps option in 32-bit node is not recommended;\\n\\n' +\n      '\\tsee https://github.com/jprichardson/node-fs-extra/issues/269',\n      'Warning', 'fs-extra-WARN0001'\n    )\n  }\n\n  const { srcStat, destStat } = await stat.checkPaths(src, dest, 'copy', opts)\n\n  await stat.checkParentPaths(src, srcStat, dest, 'copy')\n\n  const include = await runFilter(src, dest, opts)\n\n  if (!include) return\n\n  // check if the parent of dest exists, and create it if it doesn't exist\n  const destParent = path.dirname(dest)\n  const dirExists = await pathExists(destParent)\n  if (!dirExists) {\n    await mkdirs(destParent)\n  }\n\n  await getStatsAndPerformCopy(destStat, src, dest, opts)\n}\n\nasync function runFilter (src, dest, opts) {\n  if (!opts.filter) return true\n  return opts.filter(src, dest)\n}\n\nasync function getStatsAndPerformCopy (destStat, src, dest, opts) {\n  const statFn = opts.dereference ? fs.stat : fs.lstat\n  const srcStat = await statFn(src)\n\n  if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts)\n\n  if (\n    srcStat.isFile() ||\n    srcStat.isCharacterDevice() ||\n    srcStat.isBlockDevice()\n  ) return onFile(srcStat, destStat, src, dest, opts)\n\n  if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts)\n  if (srcStat.isSocket()) throw new Error(`Cannot copy a socket file: ${src}`)\n  if (srcStat.isFIFO()) throw new Error(`Cannot copy a FIFO pipe: ${src}`)\n  throw new Error(`Unknown file: ${src}`)\n}\n\nasync function onFile (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts)\n\n  if (opts.overwrite) {\n    await fs.unlink(dest)\n    return copyFile(srcStat, src, dest, opts)\n  }\n  if (opts.errorOnExist) {\n    throw new Error(`'${dest}' already exists`)\n  }\n}\n\nasync function copyFile (srcStat, src, dest, opts) {\n  await fs.copyFile(src, dest)\n  if (opts.preserveTimestamps) {\n    // Make sure the file is writable before setting the timestamp\n    // otherwise open fails with EPERM when invoked with 'r+'\n    // (through utimes call)\n    if (fileIsNotWritable(srcStat.mode)) {\n      await makeFileWritable(dest, srcStat.mode)\n    }\n\n    // Set timestamps and mode correspondingly\n\n    // Note that The initial srcStat.atime cannot be trusted\n    // because it is modified by the read(2) system call\n    // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n    const updatedSrcStat = await fs.stat(src)\n    await utimesMillis(dest, updatedSrcStat.atime, updatedSrcStat.mtime)\n  }\n\n  return fs.chmod(dest, srcStat.mode)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode) {\n  return fs.chmod(dest, srcMode | 0o200)\n}\n\nasync function onDir (srcStat, destStat, src, dest, opts) {\n  // the dest directory might not exist, create it\n  if (!destStat) {\n    await fs.mkdir(dest)\n  }\n\n  // iterate through the files in the current directory to copy everything\n  await asyncIteratorConcurrentProcess(await fs.opendir(src), async (item) => {\n    const srcItem = path.join(src, item.name)\n    const destItem = path.join(dest, item.name)\n\n    const include = await runFilter(srcItem, destItem, opts)\n    // only copy the item if it matches the filter function\n    if (include) {\n      const { destStat } = await stat.checkPaths(srcItem, destItem, 'copy', opts)\n      // If the item is a copyable file, `getStatsAndPerformCopy` will copy it\n      // If the item is a directory, `getStatsAndPerformCopy` will call `onDir` recursively\n      await getStatsAndPerformCopy(destStat, srcItem, destItem, opts)\n    }\n  })\n\n  if (!destStat) {\n    await fs.chmod(dest, srcStat.mode)\n  }\n}\n\nasync function onLink (destStat, src, dest, opts) {\n  let resolvedSrc = await fs.readlink(src)\n  if (opts.dereference) {\n    resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n  }\n  if (!destStat) {\n    return fs.symlink(resolvedSrc, dest)\n  }\n\n  let resolvedDest = null\n  try {\n    resolvedDest = await fs.readlink(dest)\n  } catch (e) {\n    // dest exists and is a regular file or directory,\n    // Windows may throw UNKNOWN error. If dest already exists,\n    // fs throws error anyway, so no need to guard against it here.\n    if (e.code === 'EINVAL' || e.code === 'UNKNOWN') return fs.symlink(resolvedSrc, dest)\n    throw e\n  }\n  if (opts.dereference) {\n    resolvedDest = path.resolve(process.cwd(), resolvedDest)\n  }\n  // If both symlinks resolve to the same target, they are still distinct symlinks\n  // that can be copied/overwritten. Only check subdirectory constraints when\n  // the resolved paths are different.\n  if (resolvedSrc !== resolvedDest) {\n    if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n      throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`)\n    }\n\n    // do not copy if src is a subdir of dest since unlinking\n    // dest in this case would result in removing src contents\n    // and therefore a broken symlink would be created.\n    if (stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n      throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`)\n    }\n  }\n\n  // copy the link\n  await fs.unlink(dest)\n  return fs.symlink(resolvedSrc, dest)\n}\n\nmodule.exports = copy\n", "'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirsSync = require('../mkdirs').mkdirsSync\nconst utimesMillisSync = require('../util/utimes').utimesMillisSync\nconst stat = require('../util/stat')\n\nfunction copySync (src, dest, opts) {\n  if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  opts = opts || {}\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    process.emitWarning(\n      'Using the preserveTimestamps option in 32-bit node is not recommended;\\n\\n' +\n      '\\tsee https://github.com/jprichardson/node-fs-extra/issues/269',\n      'Warning', 'fs-extra-WARN0002'\n    )\n  }\n\n  const { srcStat, destStat } = stat.checkPathsSync(src, dest, 'copy', opts)\n  stat.checkParentPathsSync(src, srcStat, dest, 'copy')\n  if (opts.filter && !opts.filter(src, dest)) return\n  const destParent = path.dirname(dest)\n  if (!fs.existsSync(destParent)) mkdirsSync(destParent)\n  return getStats(destStat, src, dest, opts)\n}\n\nfunction getStats (destStat, src, dest, opts) {\n  const statSync = opts.dereference ? fs.statSync : fs.lstatSync\n  const srcStat = statSync(src)\n\n  if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isFile() ||\n           srcStat.isCharacterDevice() ||\n           srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts)\n  else if (srcStat.isSocket()) throw new Error(`Cannot copy a socket file: ${src}`)\n  else if (srcStat.isFIFO()) throw new Error(`Cannot copy a FIFO pipe: ${src}`)\n  throw new Error(`Unknown file: ${src}`)\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts)\n  return mayCopyFile(srcStat, src, dest, opts)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts) {\n  if (opts.overwrite) {\n    fs.unlinkSync(dest)\n    return copyFile(srcStat, src, dest, opts)\n  } else if (opts.errorOnExist) {\n    throw new Error(`'${dest}' already exists`)\n  }\n}\n\nfunction copyFile (srcStat, src, dest, opts) {\n  fs.copyFileSync(src, dest)\n  if (opts.preserveTimestamps) handleTimestamps(srcStat.mode, src, dest)\n  return setDestMode(dest, srcStat.mode)\n}\n\nfunction handleTimestamps (srcMode, src, dest) {\n  // Make sure the file is writable before setting the timestamp\n  // otherwise open fails with EPERM when invoked with 'r+'\n  // (through utimes call)\n  if (fileIsNotWritable(srcMode)) makeFileWritable(dest, srcMode)\n  return setDestTimestamps(src, dest)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode) {\n  return setDestMode(dest, srcMode | 0o200)\n}\n\nfunction setDestMode (dest, srcMode) {\n  return fs.chmodSync(dest, srcMode)\n}\n\nfunction setDestTimestamps (src, dest) {\n  // The initial srcStat.atime cannot be trusted\n  // because it is modified by the read(2) system call\n  // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n  const updatedSrcStat = fs.statSync(src)\n  return utimesMillisSync(dest, updatedSrcStat.atime, updatedSrcStat.mtime)\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return mkDirAndCopy(srcStat.mode, src, dest, opts)\n  return copyDir(src, dest, opts)\n}\n\nfunction mkDirAndCopy (srcMode, src, dest, opts) {\n  fs.mkdirSync(dest)\n  copyDir(src, dest, opts)\n  return setDestMode(dest, srcMode)\n}\n\nfunction copyDir (src, dest, opts) {\n  const dir = fs.opendirSync(src)\n\n  try {\n    let dirent\n\n    while ((dirent = dir.readSync()) !== null) {\n      copyDirItem(dirent.name, src, dest, opts)\n    }\n  } finally {\n    dir.closeSync()\n  }\n}\n\nfunction copyDirItem (item, src, dest, opts) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  if (opts.filter && !opts.filter(srcItem, destItem)) return\n  const { destStat } = stat.checkPathsSync(srcItem, destItem, 'copy', opts)\n  return getStats(destStat, srcItem, destItem, opts)\n}\n\nfunction onLink (destStat, src, dest, opts) {\n  let resolvedSrc = fs.readlinkSync(src)\n  if (opts.dereference) {\n    resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n  }\n\n  if (!destStat) {\n    return fs.symlinkSync(resolvedSrc, dest)\n  } else {\n    let resolvedDest\n    try {\n      resolvedDest = fs.readlinkSync(dest)\n    } catch (err) {\n      // dest exists and is a regular file or directory,\n      // Windows may throw UNKNOWN error. If dest already exists,\n      // fs throws error anyway, so no need to guard against it here.\n      if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlinkSync(resolvedSrc, dest)\n      throw err\n    }\n    if (opts.dereference) {\n      resolvedDest = path.resolve(process.cwd(), resolvedDest)\n    }\n    // If both symlinks resolve to the same target, they are still distinct symlinks\n    // that can be copied/overwritten. Only check subdirectory constraints when\n    // the resolved paths are different.\n    if (resolvedSrc !== resolvedDest) {\n      if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n        throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`)\n      }\n\n      // prevent copy if src is a subdir of dest since unlinking\n      // dest in this case would result in removing src contents\n      // and therefore a broken symlink would be created.\n      if (stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n        throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`)\n      }\n    }\n    return copyLink(resolvedSrc, dest)\n  }\n}\n\nfunction copyLink (resolvedSrc, dest) {\n  fs.unlinkSync(dest)\n  return fs.symlinkSync(resolvedSrc, dest)\n}\n\nmodule.exports = copySync\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nmodule.exports = {\n  copy: u(require('./copy')),\n  copySync: require('./copy-sync')\n}\n", "'use strict'\n\nconst fs = require('graceful-fs')\nconst u = require('universalify').fromCallback\n\nfunction remove (path, callback) {\n  fs.rm(path, { recursive: true, force: true }, callback)\n}\n\nfunction removeSync (path) {\n  fs.rmSync(path, { recursive: true, force: true })\n}\n\nmodule.exports = {\n  remove: u(remove),\n  removeSync\n}\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst remove = require('../remove')\n\nconst emptyDir = u(async function emptyDir (dir) {\n  let items\n  try {\n    items = await fs.readdir(dir)\n  } catch {\n    return mkdir.mkdirs(dir)\n  }\n\n  return Promise.all(items.map(item => remove.remove(path.join(dir, item))))\n})\n\nfunction emptyDirSync (dir) {\n  let items\n  try {\n    items = fs.readdirSync(dir)\n  } catch {\n    return mkdir.mkdirsSync(dir)\n  }\n\n  items.forEach(item => {\n    item = path.join(dir, item)\n    remove.removeSync(item)\n  })\n}\n\nmodule.exports = {\n  emptyDirSync,\n  emptydirSync: emptyDirSync,\n  emptyDir,\n  emptydir: emptyDir\n}\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst path = require('path')\nconst fs = require('../fs')\nconst mkdir = require('../mkdirs')\n\nasync function createFile (file) {\n  let stats\n  try {\n    stats = await fs.stat(file)\n  } catch { }\n  if (stats && stats.isFile()) return\n\n  const dir = path.dirname(file)\n\n  let dirStats = null\n  try {\n    dirStats = await fs.stat(dir)\n  } catch (err) {\n    // if the directory doesn't exist, make it\n    if (err.code === 'ENOENT') {\n      await mkdir.mkdirs(dir)\n      await fs.writeFile(file, '')\n      return\n    } else {\n      throw err\n    }\n  }\n\n  if (dirStats.isDirectory()) {\n    await fs.writeFile(file, '')\n  } else {\n    // parent is not a directory\n    // This is just to cause an internal ENOTDIR error to be thrown\n    await fs.readdir(dir)\n  }\n}\n\nfunction createFileSync (file) {\n  let stats\n  try {\n    stats = fs.statSync(file)\n  } catch { }\n  if (stats && stats.isFile()) return\n\n  const dir = path.dirname(file)\n  try {\n    if (!fs.statSync(dir).isDirectory()) {\n      // parent is not a directory\n      // This is just to cause an internal ENOTDIR error to be thrown\n      fs.readdirSync(dir)\n    }\n  } catch (err) {\n    // If the stat call above failed because the directory doesn't exist, create it\n    if (err && err.code === 'ENOENT') mkdir.mkdirsSync(dir)\n    else throw err\n  }\n\n  fs.writeFileSync(file, '')\n}\n\nmodule.exports = {\n  createFile: u(createFile),\n  createFileSync\n}\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst path = require('path')\nconst fs = require('../fs')\nconst mkdir = require('../mkdirs')\nconst { pathExists } = require('../path-exists')\nconst { areIdentical } = require('../util/stat')\n\nasync function createLink (srcpath, dstpath) {\n  let dstStat\n  try {\n    dstStat = await fs.lstat(dstpath)\n  } catch {\n    // ignore error\n  }\n\n  let srcStat\n  try {\n    srcStat = await fs.lstat(srcpath)\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  if (dstStat && areIdentical(srcStat, dstStat)) return\n\n  const dir = path.dirname(dstpath)\n\n  const dirExists = await pathExists(dir)\n\n  if (!dirExists) {\n    await mkdir.mkdirs(dir)\n  }\n\n  await fs.link(srcpath, dstpath)\n}\n\nfunction createLinkSync (srcpath, dstpath) {\n  let dstStat\n  try {\n    dstStat = fs.lstatSync(dstpath)\n  } catch {}\n\n  try {\n    const srcStat = fs.lstatSync(srcpath)\n    if (dstStat && areIdentical(srcStat, dstStat)) return\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  const dir = path.dirname(dstpath)\n  const dirExists = fs.existsSync(dir)\n  if (dirExists) return fs.linkSync(srcpath, dstpath)\n  mkdir.mkdirsSync(dir)\n\n  return fs.linkSync(srcpath, dstpath)\n}\n\nmodule.exports = {\n  createLink: u(createLink),\n  createLinkSync\n}\n", "'use strict'\n\nconst path = require('path')\nconst fs = require('../fs')\nconst { pathExists } = require('../path-exists')\n\nconst u = require('universalify').fromPromise\n\n/**\n * Function that returns two types of paths, one relative to symlink, and one\n * relative to the current working directory. Checks if path is absolute or\n * relative. If the path is relative, this function checks if the path is\n * relative to symlink or relative to current working directory. This is an\n * initiative to find a smarter `srcpath` to supply when building symlinks.\n * This allows you to determine which path to use out of one of three possible\n * types of source paths. The first is an absolute path. This is detected by\n * `path.isAbsolute()`. When an absolute path is provided, it is checked to\n * see if it exists. If it does it's used, if not an error is returned\n * (callback)/ thrown (sync). The other two options for `srcpath` are a\n * relative url. By default Node's `fs.symlink` works by creating a symlink\n * using `dstpath` and expects the `srcpath` to be relative to the newly\n * created symlink. If you provide a `srcpath` that does not exist on the file\n * system it results in a broken symlink. To minimize this, the function\n * checks to see if the 'relative to symlink' source file exists, and if it\n * does it will use it. If it does not, it checks if there's a file that\n * exists that is relative to the current working directory, if does its used.\n * This preserves the expectations of the original fs.symlink spec and adds\n * the ability to pass in `relative to current working direcotry` paths.\n */\n\nasync function symlinkPaths (srcpath, dstpath) {\n  if (path.isAbsolute(srcpath)) {\n    try {\n      await fs.lstat(srcpath)\n    } catch (err) {\n      err.message = err.message.replace('lstat', 'ensureSymlink')\n      throw err\n    }\n\n    return {\n      toCwd: srcpath,\n      toDst: srcpath\n    }\n  }\n\n  const dstdir = path.dirname(dstpath)\n  const relativeToDst = path.join(dstdir, srcpath)\n\n  const exists = await pathExists(relativeToDst)\n  if (exists) {\n    return {\n      toCwd: relativeToDst,\n      toDst: srcpath\n    }\n  }\n\n  try {\n    await fs.lstat(srcpath)\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureSymlink')\n    throw err\n  }\n\n  return {\n    toCwd: srcpath,\n    toDst: path.relative(dstdir, srcpath)\n  }\n}\n\nfunction symlinkPathsSync (srcpath, dstpath) {\n  if (path.isAbsolute(srcpath)) {\n    const exists = fs.existsSync(srcpath)\n    if (!exists) throw new Error('absolute srcpath does not exist')\n    return {\n      toCwd: srcpath,\n      toDst: srcpath\n    }\n  }\n\n  const dstdir = path.dirname(dstpath)\n  const relativeToDst = path.join(dstdir, srcpath)\n  const exists = fs.existsSync(relativeToDst)\n  if (exists) {\n    return {\n      toCwd: relativeToDst,\n      toDst: srcpath\n    }\n  }\n\n  const srcExists = fs.existsSync(srcpath)\n  if (!srcExists) throw new Error('relative srcpath does not exist')\n  return {\n    toCwd: srcpath,\n    toDst: path.relative(dstdir, srcpath)\n  }\n}\n\nmodule.exports = {\n  symlinkPaths: u(symlinkPaths),\n  symlinkPathsSync\n}\n", "'use strict'\n\nconst fs = require('../fs')\nconst u = require('universalify').fromPromise\n\nasync function symlinkType (srcpath, type) {\n  if (type) return type\n\n  let stats\n  try {\n    stats = await fs.lstat(srcpath)\n  } catch {\n    return 'file'\n  }\n\n  return (stats && stats.isDirectory()) ? 'dir' : 'file'\n}\n\nfunction symlinkTypeSync (srcpath, type) {\n  if (type) return type\n\n  let stats\n  try {\n    stats = fs.lstatSync(srcpath)\n  } catch {\n    return 'file'\n  }\n  return (stats && stats.isDirectory()) ? 'dir' : 'file'\n}\n\nmodule.exports = {\n  symlinkType: u(symlinkType),\n  symlinkTypeSync\n}\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst path = require('path')\nconst fs = require('../fs')\n\nconst { mkdirs, mkdirsSync } = require('../mkdirs')\n\nconst { symlinkPaths, symlinkPathsSync } = require('./symlink-paths')\nconst { symlinkType, symlinkTypeSync } = require('./symlink-type')\n\nconst { pathExists } = require('../path-exists')\n\nconst { areIdentical } = require('../util/stat')\n\nasync function createSymlink (srcpath, dstpath, type) {\n  let stats\n  try {\n    stats = await fs.lstat(dstpath)\n  } catch { }\n\n  if (stats && stats.isSymbolicLink()) {\n    const [srcStat, dstStat] = await Promise.all([\n      fs.stat(srcpath),\n      fs.stat(dstpath)\n    ])\n\n    if (areIdentical(srcStat, dstStat)) return\n  }\n\n  const relative = await symlinkPaths(srcpath, dstpath)\n  srcpath = relative.toDst\n  const toType = await symlinkType(relative.toCwd, type)\n  const dir = path.dirname(dstpath)\n\n  if (!(await pathExists(dir))) {\n    await mkdirs(dir)\n  }\n\n  return fs.symlink(srcpath, dstpath, toType)\n}\n\nfunction createSymlinkSync (srcpath, dstpath, type) {\n  let stats\n  try {\n    stats = fs.lstatSync(dstpath)\n  } catch { }\n  if (stats && stats.isSymbolicLink()) {\n    const srcStat = fs.statSync(srcpath)\n    const dstStat = fs.statSync(dstpath)\n    if (areIdentical(srcStat, dstStat)) return\n  }\n\n  const relative = symlinkPathsSync(srcpath, dstpath)\n  srcpath = relative.toDst\n  type = symlinkTypeSync(relative.toCwd, type)\n  const dir = path.dirname(dstpath)\n  const exists = fs.existsSync(dir)\n  if (exists) return fs.symlinkSync(srcpath, dstpath, type)\n  mkdirsSync(dir)\n  return fs.symlinkSync(srcpath, dstpath, type)\n}\n\nmodule.exports = {\n  createSymlink: u(createSymlink),\n  createSymlinkSync\n}\n", "'use strict'\n\nconst { createFile, createFileSync } = require('./file')\nconst { createLink, createLinkSync } = require('./link')\nconst { createSymlink, createSymlinkSync } = require('./symlink')\n\nmodule.exports = {\n  // file\n  createFile,\n  createFileSync,\n  ensureFile: createFile,\n  ensureFileSync: createFileSync,\n  // link\n  createLink,\n  createLinkSync,\n  ensureLink: createLink,\n  ensureLinkSync: createLinkSync,\n  // symlink\n  createSymlink,\n  createSymlinkSync,\n  ensureSymlink: createSymlink,\n  ensureSymlinkSync: createSymlinkSync\n}\n", "function stringify (obj, { EOL = '\\n', finalEOL = true, replacer = null, spaces } = {}) {\n  const EOF = finalEOL ? EOL : ''\n  const str = JSON.stringify(obj, replacer, spaces)\n\n  return str.replace(/\\n/g, EOL) + EOF\n}\n\nfunction stripBom (content) {\n  // we do this because JSON.parse would convert it to a utf8 string if encoding wasn't specified\n  if (Buffer.isBuffer(content)) content = content.toString('utf8')\n  return content.replace(/^\\uFEFF/, '')\n}\n\nmodule.exports = { stringify, stripBom }\n", "let _fs\ntry {\n  _fs = require('graceful-fs')\n} catch (_) {\n  _fs = require('fs')\n}\nconst universalify = require('universalify')\nconst { stringify, stripBom } = require('./utils')\n\nasync function _readFile (file, options = {}) {\n  if (typeof options === 'string') {\n    options = { encoding: options }\n  }\n\n  const fs = options.fs || _fs\n\n  const shouldThrow = 'throws' in options ? options.throws : true\n\n  let data = await universalify.fromCallback(fs.readFile)(file, options)\n\n  data = stripBom(data)\n\n  let obj\n  try {\n    obj = JSON.parse(data, options ? options.reviver : null)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = `${file}: ${err.message}`\n      throw err\n    } else {\n      return null\n    }\n  }\n\n  return obj\n}\n\nconst readFile = universalify.fromPromise(_readFile)\n\nfunction readFileSync (file, options = {}) {\n  if (typeof options === 'string') {\n    options = { encoding: options }\n  }\n\n  const fs = options.fs || _fs\n\n  const shouldThrow = 'throws' in options ? options.throws : true\n\n  try {\n    let content = fs.readFileSync(file, options)\n    content = stripBom(content)\n    return JSON.parse(content, options.reviver)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = `${file}: ${err.message}`\n      throw err\n    } else {\n      return null\n    }\n  }\n}\n\nasync function _writeFile (file, obj, options = {}) {\n  const fs = options.fs || _fs\n\n  const str = stringify(obj, options)\n\n  await universalify.fromCallback(fs.writeFile)(file, str, options)\n}\n\nconst writeFile = universalify.fromPromise(_writeFile)\n\nfunction writeFileSync (file, obj, options = {}) {\n  const fs = options.fs || _fs\n\n  const str = stringify(obj, options)\n  // not sure if fs.writeFileSync returns anything, but just in case\n  return fs.writeFileSync(file, str, options)\n}\n\n// NOTE: do not change this export format; required for ESM compat\n// see https://github.com/jprichardson/node-jsonfile/pull/162 for details\nmodule.exports = {\n  readFile,\n  readFileSync,\n  writeFile,\n  writeFileSync\n}\n", "'use strict'\n\nconst jsonFile = require('jsonfile')\n\nmodule.exports = {\n  // jsonfile exports\n  readJson: jsonFile.readFile,\n  readJsonSync: jsonFile.readFileSync,\n  writeJson: jsonFile.writeFile,\n  writeJsonSync: jsonFile.writeFileSync\n}\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nasync function outputFile (file, data, encoding = 'utf-8') {\n  const dir = path.dirname(file)\n\n  if (!(await pathExists(dir))) {\n    await mkdir.mkdirs(dir)\n  }\n\n  return fs.writeFile(file, data, encoding)\n}\n\nfunction outputFileSync (file, ...args) {\n  const dir = path.dirname(file)\n  if (!fs.existsSync(dir)) {\n    mkdir.mkdirsSync(dir)\n  }\n\n  fs.writeFileSync(file, ...args)\n}\n\nmodule.exports = {\n  outputFile: u(outputFile),\n  outputFileSync\n}\n", "'use strict'\n\nconst { stringify } = require('jsonfile/utils')\nconst { outputFile } = require('../output-file')\n\nasync function outputJson (file, data, options = {}) {\n  const str = stringify(data, options)\n\n  await outputFile(file, str, options)\n}\n\nmodule.exports = outputJson\n", "'use strict'\n\nconst { stringify } = require('jsonfile/utils')\nconst { outputFileSync } = require('../output-file')\n\nfunction outputJsonSync (file, data, options) {\n  const str = stringify(data, options)\n\n  outputFileSync(file, str, options)\n}\n\nmodule.exports = outputJsonSync\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst jsonFile = require('./jsonfile')\n\njsonFile.outputJson = u(require('./output-json'))\njsonFile.outputJsonSync = require('./output-json-sync')\n// aliases\njsonFile.outputJSON = jsonFile.outputJson\njsonFile.outputJSONSync = jsonFile.outputJsonSync\njsonFile.writeJSON = jsonFile.writeJson\njsonFile.writeJSONSync = jsonFile.writeJsonSync\njsonFile.readJSON = jsonFile.readJson\njsonFile.readJSONSync = jsonFile.readJsonSync\n\nmodule.exports = jsonFile\n", "'use strict'\n\nconst fs = require('../fs')\nconst path = require('path')\nconst { copy } = require('../copy')\nconst { remove } = require('../remove')\nconst { mkdirp } = require('../mkdirs')\nconst { pathExists } = require('../path-exists')\nconst stat = require('../util/stat')\n\nasync function move (src, dest, opts = {}) {\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  const { srcStat, isChangingCase = false } = await stat.checkPaths(src, dest, 'move', opts)\n\n  await stat.checkParentPaths(src, srcStat, dest, 'move')\n\n  // If the parent of dest is not root, make sure it exists before proceeding\n  const destParent = path.dirname(dest)\n  const parsedParentPath = path.parse(destParent)\n  if (parsedParentPath.root !== destParent) {\n    await mkdirp(destParent)\n  }\n\n  return doRename(src, dest, overwrite, isChangingCase)\n}\n\nasync function doRename (src, dest, overwrite, isChangingCase) {\n  if (!isChangingCase) {\n    if (overwrite) {\n      await remove(dest)\n    } else if (await pathExists(dest)) {\n      throw new Error('dest already exists.')\n    }\n  }\n\n  try {\n    // Try w/ rename first, and try copy + remove if EXDEV\n    await fs.rename(src, dest)\n  } catch (err) {\n    if (err.code !== 'EXDEV') {\n      throw err\n    }\n    await moveAcrossDevice(src, dest, overwrite)\n  }\n}\n\nasync function moveAcrossDevice (src, dest, overwrite) {\n  const opts = {\n    overwrite,\n    errorOnExist: true,\n    preserveTimestamps: true\n  }\n\n  await copy(src, dest, opts)\n  return remove(src)\n}\n\nmodule.exports = move\n", "'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copySync = require('../copy').copySync\nconst removeSync = require('../remove').removeSync\nconst mkdirpSync = require('../mkdirs').mkdirpSync\nconst stat = require('../util/stat')\n\nfunction moveSync (src, dest, opts) {\n  opts = opts || {}\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  const { srcStat, isChangingCase = false } = stat.checkPathsSync(src, dest, 'move', opts)\n  stat.checkParentPathsSync(src, srcStat, dest, 'move')\n  if (!isParentRoot(dest)) mkdirpSync(path.dirname(dest))\n  return doRename(src, dest, overwrite, isChangingCase)\n}\n\nfunction isParentRoot (dest) {\n  const parent = path.dirname(dest)\n  const parsedPath = path.parse(parent)\n  return parsedPath.root === parent\n}\n\nfunction doRename (src, dest, overwrite, isChangingCase) {\n  if (isChangingCase) return rename(src, dest, overwrite)\n  if (overwrite) {\n    removeSync(dest)\n    return rename(src, dest, overwrite)\n  }\n  if (fs.existsSync(dest)) throw new Error('dest already exists.')\n  return rename(src, dest, overwrite)\n}\n\nfunction rename (src, dest, overwrite) {\n  try {\n    fs.renameSync(src, dest)\n  } catch (err) {\n    if (err.code !== 'EXDEV') throw err\n    return moveAcrossDevice(src, dest, overwrite)\n  }\n}\n\nfunction moveAcrossDevice (src, dest, overwrite) {\n  const opts = {\n    overwrite,\n    errorOnExist: true,\n    preserveTimestamps: true\n  }\n  copySync(src, dest, opts)\n  return removeSync(src)\n}\n\nmodule.exports = moveSync\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nmodule.exports = {\n  move: u(require('./move')),\n  moveSync: require('./move-sync')\n}\n", "'use strict'\n\nmodule.exports = {\n  // Export promiseified graceful-fs:\n  ...require('./fs'),\n  // Export extra methods:\n  ...require('./copy'),\n  ...require('./empty'),\n  ...require('./ensure'),\n  ...require('./json'),\n  ...require('./mkdirs'),\n  ...require('./move'),\n  ...require('./output-file'),\n  ...require('./path-exists'),\n  ...require('./remove')\n}\n", "import express from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport logger from './utils/logger';\nimport { config } from './config/environment';\nimport { apiLimiter } from './api/middlewares/rateLimiter';\nimport {\n  errorHandler,\n  notFoundHandler,\n  requestLogger,\n} from './api/middlewares/errorHandler';\nimport sessionRoutes from './api/routes/session.routes';\nimport jobsRoutes from './api/routes/jobs.routes';\nimport messageRoutes from './api/routes/message.routes';\nimport pdfRoutes from './api/routes/pdf.routes';\nimport jobScheduler from './jobs/scheduler.service';\nimport pdfGenerator from './pdf/generator.service';\nimport connectionManager from './whatsapp/baileys/connection.manager';\n\nconst app = express();\n\n// Middleware de seguridad\napp.use(helmet());\napp.use(cors());\n\n// Middleware de parseo\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ limit: '10mb', extended: true }));\n\n// Middleware de logging y rate limiting\napp.use(requestLogger);\napp.use(apiLimiter);\n\n// Health check\napp.get('/health', (req, res) => {\n  res.status(200).json({\n    success: true,\n    message: 'Server is running',\n    timestamp: new Date().toISOString(),\n    environment: config.nodeEnv,\n  });\n});\n\n// API Routes\napp.use('/api/sessions', sessionRoutes);\napp.use('/api/jobs', jobsRoutes);\napp.use('/api/messages', messageRoutes);\napp.use('/api/pdf', pdfRoutes);\n\n// Status endpoint\napp.get('/api/status', (req, res) => {\n  const connections = connectionManager.getAllConnections();\n  res.status(200).json({\n    success: true,\n    data: {\n      activeSessions: connections.size,\n      nodeEnv: config.nodeEnv,\n      timestamp: new Date().toISOString(),\n    },\n  });\n});\n\n// Error handlers\napp.use(notFoundHandler);\napp.use(errorHandler);\n\n// Inicializaci\u00F3n del servidor\nasync function startServer() {\n  try {\n    logger.info('\uD83D\uDE80 Starting WhatsApp AI Agent Server...');\n\n    // Inicializar servicios\n    logger.info('Initializing PDF Generator...');\n    await pdfGenerator.initialize();\n\n    logger.info('Initializing Job Scheduler...');\n    await jobScheduler.initialize();\n\n    // Iniciar servidor HTTP\n    const server = app.listen(config.port, () => {\n      logger.info(`\u2705 Server running on port ${config.port}`);\n      logger.info(`\uD83D\uDCCA Environment: ${config.nodeEnv}`);\n      logger.info(`\uD83D\uDCC1 WhatsApp sessions dir: ${config.whatsapp.sessionDir}`);\n    });\n\n    // Graceful shutdown\n    const gracefulShutdown = async (signal: string) => {\n      logger.info(`\\n\uD83D\uDCF4 Received ${signal}, shutting down gracefully...`);\n\n      // Cerrar servidor HTTP\n      server.close(async () => {\n        logger.info('HTTP server closed');\n\n        try {\n          // Desconectar todas las sesiones de WhatsApp\n          await connectionManager.disconnectAll();\n\n          // Cerrar scheduler de jobs\n          await jobScheduler.shutdown();\n\n          // Cerrar PDF Generator\n          await pdfGenerator.shutdown();\n\n          logger.info('\u2705 All services shut down successfully');\n          process.exit(0);\n        } catch (error) {\n          logger.error('Error during shutdown:', error);\n          process.exit(1);\n        }\n      });\n\n      // Force shutdown despu\u00E9s de 30 segundos\n      setTimeout(() => {\n        logger.error('Forced shutdown due to timeout');\n        process.exit(1);\n      }, 30000);\n    };\n\n    process.on('SIGTERM', () => gracefulShutdown('SIGTERM'));\n    process.on('SIGINT', () => gracefulShutdown('SIGINT'));\n\n    // Error handling\n    process.on('uncaughtException', (error) => {\n      logger.error('Uncaught Exception:', error);\n      process.exit(1);\n    });\n\n    process.on('unhandledRejection', (reason, promise) => {\n      logger.error('Unhandled Rejection at:', promise, 'reason:', reason);\n    });\n  } catch (error) {\n    logger.error('Failed to start server:', error);\n    process.exit(1);\n  }\n}\n\n// Iniciar si es m\u00F3dulo principal\nif (import.meta.url === `file://${process.argv[1]}`) {\n  startServer();\n}\n\nexport default app;\n", "import winston from 'winston';\nimport path from 'path';\nimport { config } from '../config/environment';\n\nconst logDir = config.logging.dir;\n\nconst logger = winston.createLogger({\n  level: config.logging.level,\n  format: winston.format.combine(\n    winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }),\n    winston.format.errors({ stack: true }),\n    winston.format.splat(),\n    winston.format.json(),\n    winston.format.printf(({ timestamp, level, message, ...meta }) => {\n      return `${timestamp} [${level.toUpperCase()}]: ${message} ${\n        Object.keys(meta).length ? JSON.stringify(meta, null, 2) : ''\n      }`;\n    })\n  ),\n  defaultMeta: { service: 'mvp-api' },\n  transports: [\n    new winston.transports.File({\n      filename: path.join(logDir, 'error.log'),\n      level: 'error',\n      maxsize: 5242880, // 5MB\n      maxFiles: 5,\n    }),\n    new winston.transports.File({\n      filename: path.join(logDir, 'combined.log'),\n      maxsize: 5242880, // 5MB\n      maxFiles: 10,\n    }),\n  ],\n});\n\n// Agregar consola en desarrollo\nif (config.nodeEnv === 'development') {\n  logger.add(\n    new winston.transports.Console({\n      format: winston.format.combine(\n        winston.format.colorize(),\n        winston.format.printf(({ timestamp, level, message, ...meta }) => {\n          const metaStr = Object.keys(meta).length\n            ? JSON.stringify(meta, null, 2)\n            : '';\n          return `${timestamp} [${level}]: ${message} ${metaStr}`;\n        })\n      ),\n    })\n  );\n}\n\nexport default logger;\n", "import dotenv from 'dotenv';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\ndotenv.config({ path: path.join(__dirname, '../../.env') });\n\nexport const config = {\n  port: parseInt(process.env.PORT || '3000', 10),\n  nodeEnv: process.env.NODE_ENV || 'development',\n  \n  // WhatsApp\n  whatsapp: {\n    sessionDir: process.env.WHATSAPP_SESSION_DIR || './data/sessions',\n    autoReconnect: process.env.WHATSAPP_AUTO_RECONNECT === 'true',\n    maxReconnectAttempts: parseInt(process.env.WHATSAPP_MAX_RECONNECT_ATTEMPTS || '5', 10),\n    qrTimeout: 60000, // 60 segundos\n  },\n  \n  // Claude API\n  anthropic: {\n    apiKey: process.env.ANTHROPIC_API_KEY!,\n  },\n  \n  // Cron Jobs\n  jobs: {\n    storageFile: process.env.CRONJOBS_STORAGE || './data/cronjobs.json',\n    checkInterval: 10000, // Verificar cada 10s\n  },\n  \n  // PDF\n  pdf: {\n    templatesDir: process.env.PDF_TEMPLATES_DIR || './templates/pdf',\n    uploadsDir: process.env.PDF_UPLOADS_DIR || './uploads',\n  },\n  \n  // Logging\n  logging: {\n    level: process.env.LOG_LEVEL || 'info',\n    dir: process.env.LOG_DIR || './logs',\n  },\n  \n  // Security\n  security: {\n    apiSecretKey: process.env.API_SECRET_KEY || 'dev-secret-key',\n    rateLimitWindow: process.env.RATE_LIMIT_WINDOW || '15m',\n    rateLimitMax: parseInt(process.env.RATE_LIMIT_MAX || '100', 10),\n  },\n  \n  // Features\n  features: {\n    enablePDF: true,\n    enableCron: true,\n    enableHotReload: true,\n  },\n};\n\nexport default config;\n", "import rateLimit from 'express-rate-limit';\nimport { config } from '../../config/environment';\n\nexport const apiLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutos\n  max: config.security.rateLimitMax, // l\u00EDmite de 100 requests por ventana\n  message: 'Demasiadas solicitudes desde esta IP, intenta m\u00E1s tarde',\n  standardHeaders: true, // Retornar informaci\u00F3n del rate limit en los `RateLimit-*` headers\n  legacyHeaders: false, // Deshabilitar los headers `X-RateLimit-*`\n  skip: (req) => {\n    // No limitar si tiene API key v\u00E1lida\n    return req.headers['x-api-key'] === process.env.API_SECRET_KEY;\n  },\n});\n\nexport const sessionLimiter = rateLimit({\n  windowMs: 1 * 60 * 1000, // 1 minuto\n  max: 5, // m\u00E1ximo 5 conexiones por minuto\n  keyGenerator: (req) => {\n    return req.body?.phoneNumber || req.ip || 'unknown';\n  },\n});\n\nexport const jobsLimiter = rateLimit({\n  windowMs: 60 * 1000, // 1 minuto\n  max: 10,\n});\n\nexport const messageLimiter = rateLimit({\n  windowMs: 60 * 1000, // 1 minuto\n  max: 100,\n  keyGenerator: (req) => {\n    return req.body?.chatId || req.ip || 'unknown';\n  },\n});\n", "export const TYPING_DELAY = {\n  minMs: 1000,\n  maxMs: 8000,\n  wordsPerMinute: 40,\n};\n\nexport const CONVERSATION_TIMEOUT = 30 * 60 * 1000; // 30 minutos\nexport const QR_EXPIRY_TIME = 60 * 1000; // 60 segundos\n\nexport const SERVICE_TYPES = {\n  VENTA: 'venta',\n  COLOCACION: 'colocacion',\n  TRANSPORTE: 'transporte',\n  FABRICACION: 'fabricacion',\n} as const;\n\nexport const CONVERSATION_STATES = {\n  ACTIVE: 'active',\n  WAITING_HUMAN: 'waiting_human',\n  CLOSED: 'closed',\n} as const;\n\nexport const HTTP_STATUS = {\n  OK: 200,\n  CREATED: 201,\n  BAD_REQUEST: 400,\n  UNAUTHORIZED: 401,\n  FORBIDDEN: 403,\n  NOT_FOUND: 404,\n  CONFLICT: 409,\n  INTERNAL_ERROR: 500,\n  SERVICE_UNAVAILABLE: 503,\n} as const;\n\nexport const CLAUDE_MODEL = 'claude-sonnet-4-20250514';\nexport const CLAUDE_MAX_TOKENS = 1024;\n", "import { Request, Response, NextFunction } from 'express';\nimport logger from '../../utils/logger';\nimport { HTTP_STATUS } from '../../config/constants';\n\nexport interface CustomError extends Error {\n  statusCode?: number;\n  details?: any;\n}\n\nexport function errorHandler(\n  err: CustomError,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  const statusCode = err.statusCode || HTTP_STATUS.INTERNAL_ERROR;\n  const message = err.message || 'Internal Server Error';\n\n  logger.error('Error:', {\n    statusCode,\n    message,\n    path: req.path,\n    method: req.method,\n    details: err.details,\n  });\n\n  res.status(statusCode).json({\n    success: false,\n    error: {\n      message,\n      statusCode,\n      ...(process.env.NODE_ENV === 'development' && { stack: err.stack }),\n    },\n  });\n}\n\nexport function notFoundHandler(req: Request, res: Response, next: NextFunction) {\n  const error: CustomError = new Error(`Route not found: ${req.path}`);\n  error.statusCode = HTTP_STATUS.NOT_FOUND;\n  next(error);\n}\n\nexport function requestLogger(req: Request, res: Response, next: NextFunction) {\n  const startTime = Date.now();\n\n  res.on('finish', () => {\n    const duration = Date.now() - startTime;\n    logger.info(`${req.method} ${req.path} - ${res.statusCode} (${duration}ms)`);\n  });\n\n  next();\n}\n\nexport function validateApiKey(req: Request, res: Response, next: NextFunction) {\n  const apiKey = req.headers['x-api-key'];\n  const expectedKey = process.env.API_SECRET_KEY;\n\n  if (!expectedKey || apiKey !== expectedKey) {\n    const error: CustomError = new Error('Unauthorized: Invalid API Key');\n    error.statusCode = HTTP_STATUS.UNAUTHORIZED;\n    return next(error);\n  }\n\n  next();\n}\n", "import { Router } from 'express';\nimport * as sessionController from '../controllers/session.controller';\nimport { sessionLimiter } from '../middlewares/rateLimiter';\n\nconst router = Router();\n\n// POST /api/sessions - Crear nueva sesi\u00F3n WhatsApp\nrouter.post('/', sessionLimiter, sessionController.createSession);\n\n// GET /api/sessions/:phoneNumber/status - Obtener estado de sesi\u00F3n\nrouter.get('/:phoneNumber/status', sessionController.getSessionStatus);\n\n// DELETE /api/sessions/:phoneNumber - Desconectar sesi\u00F3n\nrouter.delete('/:phoneNumber', sessionController.disconnectSession);\n\n// GET /api/sessions - Obtener todas las sesiones\nrouter.get('/', sessionController.getAllSessions);\n\nexport default router;\n", "import makeWASocket, { DisconnectReason } from '@whiskeysockets/baileys';\nimport { Boom } from '@hapi/boom';\nimport fs from 'fs-extra';\nimport path from 'path';\nimport logger from '../../utils/logger';\nimport messageListener from '../ai-agent/message.listener';\nimport { config } from '../../config/environment';\nimport { SessionConfig } from '../../types';\n\ninterface SavedSession {\n  creds: any;\n  keys: any;\n}\n\nexport class ConnectionManager {\n  private connections: Map<string, any> = new Map();\n  private qrCodes: Map<string, string> = new Map();\n\n  async createConnection(sessionPhone: string): Promise<any> {\n    try {\n      logger.info(`Creating WhatsApp connection for ${sessionPhone}`);\n\n      // Verificar si ya existe conexi\u00F3n\n      if (this.connections.has(sessionPhone)) {\n        logger.debug(`Connection already exists for ${sessionPhone}`);\n        return this.connections.get(sessionPhone);\n      }\n\n      const sessionDir = path.join(config.whatsapp.sessionDir, sessionPhone);\n      await fs.ensureDir(sessionDir);\n\n      // Cargar estado de sesi\u00F3n previa si existe\n      const { state, saveCreds } = await this.loadOrCreateState(sessionDir);\n\n      // Crear socket\n      const socket = makeWASocket({\n        auth: state,\n        printQRInTerminal: true,\n        syncFullHistory: false,\n        shouldIgnoreJid: (jid) => /status@broadcast/.test(jid),\n      });\n\n      // Guardar conexi\u00F3n\n      this.connections.set(sessionPhone, socket);\n\n      // Configurar listeners\n      this.setupListeners(socket, sessionPhone, sessionDir, saveCreds);\n\n      return socket;\n    } catch (error) {\n      logger.error(`Error creating connection for ${sessionPhone}:`, error);\n      throw error;\n    }\n  }\n\n  private setupListeners(socket: any, sessionPhone: string, sessionDir: string, saveCreds: any) {\n    // Conexi\u00F3n establecida\n    socket.ev.on('connection.update', async (update: any) => {\n      const { connection, lastDisconnect, qr } = update;\n\n      if (qr) {\n        logger.info(`QR Code for ${sessionPhone}`, qr);\n        this.qrCodes.set(sessionPhone, qr);\n        // Aqu\u00ED se podr\u00EDa emitir un evento para mostrar el QR en una interfaz web\n      }\n\n      if (connection === 'close') {\n        const reason = new Boom(lastDisconnect?.error)?.output?.statusCode;\n        const shouldReconnect = reason === DisconnectReason.connectionClosed;\n\n        logger.warn(`Connection closed for ${sessionPhone}, reason: ${reason}`);\n\n        if (shouldReconnect) {\n          if (config.whatsapp.autoReconnect) {\n            logger.info(`Auto-reconnecting ${sessionPhone}...`);\n            setTimeout(() => {\n              this.connections.delete(sessionPhone);\n              this.createConnection(sessionPhone);\n            }, 3000);\n          }\n        } else {\n          logger.error(`Cannot reconnect ${sessionPhone}, reconnecting...`);\n          this.connections.delete(sessionPhone);\n        }\n      } else if (connection === 'open') {\n        logger.info(`\u2705 Connection established for ${sessionPhone}`);\n        this.qrCodes.delete(sessionPhone);\n      }\n    });\n\n    // Guardar credenciales\n    socket.ev.on('creds.update', saveCreds);\n\n    // Procesar mensajes\n    socket.ev.on('messages.upsert', async (m: any) => {\n      for (const message of m.messages) {\n        await messageListener.handleIncomingMessage(message, sessionPhone, socket);\n      }\n    });\n  }\n\n  private async loadOrCreateState(sessionDir: string) {\n    const credPath = path.join(sessionDir, 'creds.json');\n    const keysPath = path.join(sessionDir, 'keys.json');\n\n    let creds = null;\n    let keys = {};\n\n    if (await fs.pathExists(credPath)) {\n      creds = await fs.readJSON(credPath);\n      logger.debug(`Loaded existing credentials from ${sessionDir}`);\n    }\n\n    if (await fs.pathExists(keysPath)) {\n      keys = await fs.readJSON(keysPath);\n    }\n\n    const saveCreds = async () => {\n      await fs.ensureDir(sessionDir);\n      await fs.writeJSON(credPath, creds, { spaces: 2 });\n      await fs.writeJSON(keysPath, keys, { spaces: 2 });\n      logger.debug(`Saved credentials for ${sessionDir}`);\n    };\n\n    // Usar la estructura de state que espera Baileys\n    const state = {\n      creds: creds || {},\n      keys: {\n        get: (type: string, jids: string[]) => {\n          const data: Record<string, any> = {};\n          jids.forEach((jid) => {\n            data[jid] = (keys as Record<string, any>)[jid] || null;\n          });\n          return data;\n        },\n        set: async (data: Record<string, any>) => {\n          Object.assign(keys, data);\n          await saveCreds();\n        },\n      },\n    };\n\n    return { state, saveCreds };\n  }\n\n  async disconnect(sessionPhone: string): Promise<void> {\n    try {\n      const socket = this.connections.get(sessionPhone);\n      if (socket) {\n        await socket.end({\n          cancel: true,\n        });\n        this.connections.delete(sessionPhone);\n        logger.info(`Disconnected ${sessionPhone}`);\n      }\n    } catch (error) {\n      logger.error(`Error disconnecting ${sessionPhone}:`, error);\n      this.connections.delete(sessionPhone);\n    }\n  }\n\n  async disconnectAll(): Promise<void> {\n    for (const [sessionPhone] of this.connections) {\n      await this.disconnect(sessionPhone);\n    }\n  }\n\n  getConnection(sessionPhone: string): any {\n    return this.connections.get(sessionPhone);\n  }\n\n  getAllConnections(): Map<string, any> {\n    return this.connections;\n  }\n\n  getQRCode(sessionPhone: string): string | undefined {\n    return this.qrCodes.get(sessionPhone);\n  }\n\n  isConnected(sessionPhone: string): boolean {\n    const socket = this.connections.get(sessionPhone);\n    return socket && socket.user !== undefined;\n  }\n\n  getConnectionStatus(sessionPhone: string): string {\n    const socket = this.connections.get(sessionPhone);\n    if (!socket) return 'disconnected';\n    if (socket.user) return 'connected';\n    if (this.qrCodes.has(sessionPhone)) return 'waiting_qr';\n    return 'connecting';\n  }\n}\n\nexport default new ConnectionManager();\n", "import Anthropic from '@anthropic-ai/sdk';\nimport logger from '../../utils/logger';\nimport { SYSTEM_PROMPT, getUserContextPrompt } from './prompts/asphalt-sales.prompt';\nimport { Conversation, AgentResponse } from '../../types';\nimport { CLAUDE_MODEL, CLAUDE_MAX_TOKENS } from '../../config/constants';\n\nexport class AgentService {\n  private client: Anthropic;\n\n  constructor() {\n    this.client = new Anthropic({\n      apiKey: process.env.ANTHROPIC_API_KEY!,\n    });\n  }\n\n  async generateResponse(\n    conversation: Conversation,\n    userMessage: string\n  ): Promise<AgentResponse> {\n    try {\n      logger.debug(`Generating response for conversation ${conversation.chatId}`);\n\n      // Preparar mensajes para Claude\n      const messages = this.prepareMessages(conversation, userMessage);\n\n      // Llamar a Claude API\n      const response = await this.client.messages.create({\n        model: CLAUDE_MODEL,\n        max_tokens: CLAUDE_MAX_TOKENS,\n        system: SYSTEM_PROMPT + '\\n\\n' + getUserContextPrompt(conversation),\n        messages: messages,\n      });\n\n      const assistantMessage = response.content[0].type === 'text' \n        ? response.content[0].text \n        : '';\n\n      if (!assistantMessage) {\n        throw new Error('No text in response from Claude');\n      }\n\n      // Analizar respuesta para detectar cambios de estado\n      const analysis = this.analyzeResponse(assistantMessage, conversation);\n\n      logger.debug(\n        `Response generated. Next state: ${analysis.nextState}, Handoff: ${analysis.shouldHandoff}`\n      );\n\n      return {\n        text: assistantMessage,\n        nextState: analysis.nextState,\n        shouldHandoff: analysis.shouldHandoff,\n      };\n    } catch (error) {\n      logger.error('Error calling Claude API:', error);\n      throw error;\n    }\n  }\n\n  private prepareMessages(conversation: Conversation, newMessage: string) {\n    // Tomar \u00FAltimos 10 mensajes para contexto\n    const recentMessages = conversation.messageHistory.slice(-10);\n\n    const messages = recentMessages.map((msg: any) => ({\n      role: msg.role as 'user' | 'assistant',\n      content: msg.content,\n    }));\n\n    // Agregar nuevo mensaje\n    messages.push({\n      role: 'user' as const,\n      content: newMessage,\n    });\n\n    return messages;\n  }\n\n  private analyzeResponse(text: string, conversation: Conversation) {\n    // Detectar keywords de handoff\n    const handoffKeywords = [\n      'conectarte con un supervisor',\n      'derivar',\n      'hablar con un especialista',\n      'ingeniero especializado',\n      'perm\u00EDteme conectarte',\n      'd\u00E9jame conectarte',\n    ];\n\n    const shouldHandoff = handoffKeywords.some((keyword) =>\n      text.toLowerCase().includes(keyword)\n    );\n\n    // Detectar si se complet\u00F3 la recopilaci\u00F3n\n    const completionKeywords = [\n      'con esta informaci\u00F3n',\n      'te contactar\u00E1',\n      'preparar\u00E1 una cotizaci\u00F3n',\n      'pr\u00F3ximas 2 horas',\n    ];\n\n    const isComplete = completionKeywords.some((keyword) =>\n      text.toLowerCase().includes(keyword)\n    );\n\n    let nextState = conversation.state;\n\n    if (shouldHandoff) {\n      nextState = 'waiting_human';\n    } else if (isComplete) {\n      nextState = 'closed';\n    }\n\n    return { nextState, shouldHandoff };\n  }\n}\n\nexport default new AgentService();\n", "export const SYSTEM_PROMPT = `# TU IDENTIDAD\n\nEres **Mar\u00EDa**, asesora comercial experta de **CONSTROAD**, empresa l\u00EDder en servicios de asfalto en Per\u00FA con m\u00E1s de 15 a\u00F1os de experiencia.\n\n---\n\n## TU PERSONALIDAD\n\n- **Profesional pero c\u00E1lida**: Mantienes un equilibrio entre seriedad y cercan\u00EDa\n- **Proactiva**: No esperas a que te pregunten todo, gu\u00EDas la conversaci\u00F3n\n- **Paciente**: Entiendes que no todos conocen de asfalto, explicas con claridad\n- **Emp\u00E1tica**: Te pones en el lugar del cliente y entiendes sus necesidades\n- **Natural**: Hablas como una persona real, no como un robot\n- **Peruana**: Usas expresiones locales apropiadas sin caer en informalidad excesiva\n\n**Ejemplos de tu estilo:**\n- \u2705 \"\u00A1Claro que s\u00ED! Con gusto te ayudo con eso\"\n- \u2705 \"Perfecto, d\u00E9jame hacerte un par de preguntas para darte la mejor opci\u00F3n\"\n- \u2705 \"Entiendo tu situaci\u00F3n, es muy com\u00FAn en proyectos como el tuyo\"\n- \u274C \"Procedo a solicitar informaci\u00F3n\" (muy rob\u00F3tico)\n- \u274C \"Perfecto perfecto perfecto\" (muy repetitivo)\n\n---\n\n## TU MISI\u00D3N PRINCIPAL\n\nAyudar a los clientes a encontrar la mejor soluci\u00F3n de asfalto para su proyecto, recopilando informaci\u00F3n clave de manera **natural, conversacional y eficiente**.\n\n**No eres un formulario con patas**, eres una asesora que:\n1. Escucha activamente\n2. Hace preguntas inteligentes\n3. Adapta la conversaci\u00F3n al cliente\n4. Recopila informaci\u00F3n de forma org\u00E1nica\n5. Deriva cuando es necesario\n\n---\n\n# SERVICIOS QUE OFRECES\n\n## 1. \uD83D\uDEE3\uFE0F VENTA DE ASFALTO\n\n### Tipos disponibles:\n\n#### **Asfalto en Caliente**\n- El m\u00E1s com\u00FAn y vers\u00E1til\n- Ideal para tr\u00E1fico vehicular\n- Se aplica a temperaturas de 150-160\u00B0C\n- Mejor adherencia y durabilidad\n\n#### **Asfalto en Fr\u00EDo**\n- Para reparaciones y parches\n- Ideal para climas fr\u00EDos o lluviosos\n- No requiere maquinaria especializada\n- Aplicaci\u00F3n m\u00E1s sencilla\n\n#### **Asfalto Modificado**\n- Mayor durabilidad (pol\u00EDmeros)\n- Para alto tr\u00E1fico o condiciones extremas\n- M\u00E1s resistente a deformaciones\n- Ideal para zonas industriales o avenidas principales\n\n### Espesores disponibles:\n- **1 pulgada (2.54 cm)**: Tr\u00E1fico ligero, patios, estacionamientos peque\u00F1os\n- **2 pulgadas (5.08 cm)**: Tr\u00E1fico medio, calles residenciales, estacionamientos\n- **3 pulgadas (7.62 cm)**: Tr\u00E1fico pesado, v\u00EDas principales, zonas industriales\n\n### Informaci\u00F3n que necesitas recopilar:\n\n1. **Tipo de proyecto** (para recomendar el asfalto adecuado)\n   - \"\u00BFEs para una v\u00EDa, estacionamiento, patio industrial, o qu\u00E9 tipo de proyecto?\"\n   \n2. **Tipo de tr\u00E1fico esperado**\n   - \"\u00BFQu\u00E9 tipo de veh\u00EDculos van a circular? \u00BFAutos, camiones, maquinaria pesada?\"\n   \n3. **Tipo de asfalto** (despu\u00E9s de entender su necesidad)\n   - Recomienda bas\u00E1ndote en su proyecto\n   \n4. **Espesor requerido**\n   - Sugiere seg\u00FAn el tipo de tr\u00E1fico\n   \n5. **Modalidad de entrega**\n   - \"\u00BFLo necesitas puesto en planta (lo recoges t\u00FA) o puesto en obra (te lo llevamos)?\"\n   - Si es en obra: \"\u00BFA qu\u00E9 distrito o ubicaci\u00F3n exacta?\"\n   \n6. **Cantidad aproximada**\n   - \"\u00BFCu\u00E1ntos metros c\u00FAbicos aproximadamente? Si no est\u00E1s seguro, \u00BFcu\u00E1l es el \u00E1rea en m\u00B2?\"\n\n---\n\n## 2. \uD83D\uDEA7 COLOCACI\u00D3N DE ASFALTO\n\n### Informaci\u00F3n que necesitas recopilar:\n\n#### **1. \u00C1rea y ubicaci\u00F3n**\n- \"\u00BFCu\u00E1ntos metros cuadrados necesitas asfaltar?\"\n- \"\u00BFEn qu\u00E9 distrito o ubicaci\u00F3n exacta ser\u00EDa la obra?\"\n\n#### **2. Espesor del asfalto**\n- Sugiere seg\u00FAn el uso\n\n#### **3. Estado de la base**\n- \"\u00BFYa cuentas con la base preparada o es terreno natural?\"\n- \"\u00BFEs una base nueva o es un pavimento existente que quieres recubrir?\"\n\n#### **4. Imprimaci\u00F3n (preparaci\u00F3n de superficie)**\n\n**Si es base nueva:**\n- Se requiere imprimaci\u00F3n con **MC-30** (asfalto l\u00EDquido de curado medio)\n- \"Para bases nuevas necesitamos aplicar MC-30 como imprimante\"\n\n**Si es pavimento existente:**\n- Se requiere **riego de liga** (emulsi\u00F3n asf\u00E1ltica)\n- \"Como es sobre pavimento existente, aplicaremos riego de liga para que adhiera mejor\"\n\n#### **5. Fresado (opcional)**\n- \"\u00BFNecesitas que removamos el asfalto viejo antes?\"\n\n#### **6. Tipo de terreno**\n- \"\u00BFC\u00F3mo es el \u00E1rea? \u00BFEs plana, tiene pendiente, son calles?\"\n\n---\n\n## 3. \uD83D\uDE9B SERVICIO DE TRANSPORTE\n\n### Informaci\u00F3n que necesitas:\n\n1. **Punto de carga**: \"\u00BFDe d\u00F3nde necesitas que recojamos el asfalto?\"\n2. **Punto de descarga**: \"\u00BFA d\u00F3nde hay que llevarlo?\"\n3. **Tipo de asfalto**: \"\u00BFQu\u00E9 tipo de asfalto vamos a transportar?\"\n4. **Cantidad**: \"\u00BFCu\u00E1ntos metros c\u00FAbicos son?\"\n5. **Consideraciones**: \"\u00BFHay restricci\u00F3n de horario o zona de dif\u00EDcil acceso?\"\n\n---\n\n## 4. \uD83C\uDFED SERVICIO DE FABRICACI\u00D3N\n\n**Para este servicio especializado, deriva INMEDIATAMENTE a un ingeniero.**\n\n---\n\n# REGLAS DE CONVERSACI\u00D3N\n\n## \u2705 SIEMPRE DEBES:\n\n1. **Hacer preguntas inteligentes y contextuales**\n   - M\u00E1ximo 2-3 preguntas por mensaje\n   - Adapta las preguntas seg\u00FAn las respuestas previas\n\n2. **Confirmar informaci\u00F3n importante**\n   - \"Perfecto, entonces son 500 m\u00B2 en San Isidro. \u00BFEs correcto?\"\n\n3. **Celebrar el progreso**\n   - \"\u00A1Perfecto!\", \"\u00A1Excelente!\", \"\u00A1Genial, vamos bien!\"\n\n4. **Adaptar tu lenguaje al cliente**\n   - Cliente t\u00E9cnico \u2192 M\u00E1s t\u00E9rminos especializados\n   - Cliente general \u2192 Explicaciones simples\n\n---\n\n## \u274C NUNCA DEBES:\n\n1. **Inventar informaci\u00F3n**\n   - \u274C No des precios espec\u00EDficos\n   - \u274C No prometas fechas exactas\n   - \u274C No ofrezcas descuentos\n\n2. **Ser rob\u00F3tico**\n   - \u274C \"Procedo a recopilar datos\"\n   - \u2705 \"Perfecto, d\u00E9jame hacerte un par de preguntas\"\n\n3. **Abrumar con preguntas**\n   - \u274C 5-6 preguntas en un mensaje\n   - \u2705 2-3 preguntas m\u00E1ximo\n\n4. **Ignorar el contexto previo**\n   - Si el cliente ya dijo algo, no lo vuelvas a preguntar\n\n---\n\n# DERIVACI\u00D3N A HUMANO\n\n## \uD83D\uDEA8 Deriva INMEDIATAMENTE si:\n\n1. El cliente lo pide expl\u00EDcitamente\n2. El cliente est\u00E1 molesto o insatisfecho\n3. Preguntas muy t\u00E9cnicas o legales\n4. Temas fuera de tu alcance\n5. Servicios especializados (fabricaci\u00F3n)\n\n**Frase de derivaci\u00F3n:**\n\"Entiendo tu situaci\u00F3n. Perm\u00EDteme conectarte con un supervisor que te podr\u00E1 ayudar mejor. \u00BFMe compartes tu n\u00FAmero de contacto?\"\n\n---\n\n# HORARIOS Y DISPONIBILIDAD\n\n## Horario de atenci\u00F3n:\n- **Lunes a Viernes**: 8:00 AM - 6:00 PM\n- **S\u00E1bados**: 8:00 AM - 1:00 PM\n- **Domingos**: Cerrado\n\n**Mensaje fuera de horario:**\n\"\u00A1Hola! Gracias por contactar a CONSTROAD \uD83D\uDE0A. Te escribo fuera de nuestro horario de atenci\u00F3n (Lunes a Viernes 8 AM - 6 PM, S\u00E1bados 8 AM - 1 PM). Te responder\u00E9 en cuanto abramos ma\u00F1ana. \u00A1Que tengas excelente [noche/fin de semana]!\"\n\n---\n\n# FLUJO CONVERSACIONAL\n\n## Fase 1: SALUDO Y APERTURA\n\n\"\u00A1Hola! Soy Mar\u00EDa de CONSTROAD \uD83D\uDC4B \u00BFEn qu\u00E9 te puedo ayudar hoy? Trabajamos en venta de asfalto, colocaci\u00F3n, transporte y fabricaci\u00F3n de mezclas.\"\n\n## Fase 2: IDENTIFICACI\u00D3N DEL SERVICIO\n\nEscucha y confirma: \"Perfecto, veo que necesitas [servicio]. Te voy a hacer algunas preguntas para que el equipo te prepare la mejor cotizaci\u00F3n.\"\n\n## Fase 3: RECOPILACI\u00D3N DE INFORMACI\u00D3N\n\n- 2-3 preguntas m\u00E1ximo por mensaje\n- Pregunta lo m\u00E1s relevante primero\n- Adapta seg\u00FAn las respuestas\n- Confirma informaci\u00F3n importante\n\n## Fase 4: RESUMEN Y CONFIRMACI\u00D3N\n\n\"Perfecto, d\u00E9jame confirmar que tengo todo claro: \u2705 [Resumen]. \u00BFEs correcto? \u00BFAlgo m\u00E1s?\"\n\n## Fase 5: CIERRE\n\n\"\u00A1Excelente! Con esta informaci\u00F3n nuestro equipo te preparar\u00E1 una cotizaci\u00F3n. Un asesor se contactar\u00E1 en las pr\u00F3ximas 2 horas. \u00BFTe parece?\"\n\n---\n\n# RECUERDA:\n\nEres Mar\u00EDa, eres humana, eres emp\u00E1tica, eres experta, y est\u00E1s aqu\u00ED para AYUDAR. No solo recopiles datos, crea una conexi\u00F3n con el cliente. S\u00E9 natural, s\u00E9 c\u00E1lida, s\u00E9 profesional.`;\n\nexport function getUserContextPrompt(conversation: any): string {\n  const progress = getProgressSummary(conversation);\n  const recentMessages = conversation.messageHistory\n    .slice(-6)\n    .map((m: any) => `${m.role === 'user' ? 'Cliente' : 'T\u00FA'}: ${m.content}`)\n    .join('\\n');\n\n  return `\n## CONTEXTO DE LA CONVERSACI\u00D3N ACTUAL:\n\n**Cliente:** ${conversation.chatId}\n**Servicio identificado:** ${conversation.service || 'No identificado a\u00FAn'}\n**Estado:** ${conversation.state}\n\n**Informaci\u00F3n recopilada:**\n${JSON.stringify(conversation.collectedData, null, 2)}\n\n**Progreso:** ${progress}\n\n**\u00DAltimos mensajes:**\n${recentMessages}\n\n---\n\nBas\u00E1ndote en este contexto, responde al \u00FAltimo mensaje del cliente de manera natural y contin\u00FAa recopilando la informaci\u00F3n que falta. Recuerda: \u00A1Eres Mar\u00EDa! S\u00E9 natural, emp\u00E1tica y profesional.\n`;\n}\n\nfunction getProgressSummary(conversation: any): string {\n  const data = conversation.collectedData;\n  const service = conversation.service;\n\n  if (!service) return 'A\u00FAn no se identific\u00F3 el servicio';\n\n  const required = getRequiredFields(service);\n  const collected = Object.keys(data).filter((k) => data[k]).length;\n  const total = required.length;\n\n  return `${collected}/${total} datos recopilados`;\n}\n\nfunction getRequiredFields(service: string): string[] {\n  const fields: Record<string, string[]> = {\n    venta: ['tipoAsfalto', 'espesor', 'ubicacion', 'cantidad'],\n    colocacion: ['espesor', 'ubicacion', 'area', 'imprimacion', 'tipoTerreno'],\n    transporte: ['puntoCarga', 'puntoDescarga', 'tipoAsfalto', 'cantidad'],\n    fabricacion: ['nombreContacto', 'telefono'],\n  };\n\n  return fields[service] || [];\n}\n", "import path from 'path';\nimport logger from '../../utils/logger';\nimport JsonStore from '../../storage/json.store';\nimport { Conversation } from '../../types';\nimport { config } from '../../config/environment';\n\nexport class ConversationManager {\n  private store: JsonStore;\n  private conversationsDir: string;\n\n  constructor() {\n    this.conversationsDir = path.join(config.whatsapp.sessionDir, '../conversations');\n    this.store = new JsonStore({\n      baseDir: this.conversationsDir,\n      autoBackup: true,\n    });\n  }\n\n  async getOrCreate(chatId: string, sessionPhone: string): Promise<Conversation> {\n    const key = this.getConversationKey(sessionPhone, chatId);\n    const existing = await this.store.get<Conversation>(key);\n\n    if (existing) {\n      return existing;\n    }\n\n    // Crear nueva conversaci\u00F3n\n    const conversation: Conversation = {\n      chatId,\n      phoneNumber: this.extractPhoneNumber(chatId),\n      sessionPhone,\n      state: 'active',\n      service: null,\n      collectedData: {},\n      messageHistory: [],\n      createdAt: new Date().toISOString(),\n      lastMessageAt: new Date().toISOString(),\n    };\n\n    await this.save(conversation);\n    logger.info(`Created new conversation: ${key}`);\n\n    return conversation;\n  }\n\n  async save(conversation: Conversation): Promise<void> {\n    try {\n      const key = this.getConversationKey(\n        conversation.sessionPhone,\n        conversation.chatId\n      );\n      conversation.lastMessageAt = new Date().toISOString();\n      await this.store.set(key, conversation);\n      logger.debug(`Conversation saved: ${key}`);\n    } catch (error) {\n      logger.error('Error saving conversation:', error);\n      throw error;\n    }\n  }\n\n  async get(chatId: string, sessionPhone: string): Promise<Conversation | null> {\n    const key = this.getConversationKey(sessionPhone, chatId);\n    return await this.store.get<Conversation>(key);\n  }\n\n  async delete(chatId: string, sessionPhone: string): Promise<void> {\n    const key = this.getConversationKey(sessionPhone, chatId);\n    await this.store.delete(key);\n    logger.debug(`Conversation deleted: ${key}`);\n  }\n\n  async getAllForSession(sessionPhone: string): Promise<Conversation[]> {\n    const keys = await this.store.getAllKeys();\n    const conversations: Conversation[] = [];\n\n    for (const key of keys) {\n      if (key.startsWith(`${sessionPhone}:`)) {\n        const conv = await this.store.get<Conversation>(key);\n        if (conv) {\n          conversations.push(conv);\n        }\n      }\n    }\n\n    return conversations;\n  }\n\n  async closeConversation(chatId: string, sessionPhone: string): Promise<void> {\n    const conversation = await this.get(chatId, sessionPhone);\n    if (conversation) {\n      conversation.state = 'closed';\n      await this.save(conversation);\n      logger.info(`Conversation closed: ${chatId}`);\n    }\n  }\n\n  private getConversationKey(sessionPhone: string, chatId: string): string {\n    return `${sessionPhone}:${chatId}`;\n  }\n\n  private extractPhoneNumber(chatId: string): string {\n    // Eliminar sufijo @s.whatsapp.net o @g.us\n    return chatId.replace(/@[sg]\\.whatsapp\\.net|@g\\.us/, '');\n  }\n}\n\nexport default new ConversationManager();\n", "import fs from 'fs-extra';\nimport path from 'path';\nimport logger from '../utils/logger';\n\nexport interface StorageOptions {\n  baseDir: string;\n  autoBackup?: boolean;\n}\n\nexport class JsonStore {\n  private baseDir: string;\n  private autoBackup: boolean;\n\n  constructor(options: StorageOptions) {\n    this.baseDir = options.baseDir;\n    this.autoBackup = options.autoBackup ?? true;\n  }\n\n  async get<T>(key: string): Promise<T | null> {\n    try {\n      const filePath = path.join(this.baseDir, `${key}.json`);\n      const exists = await fs.pathExists(filePath);\n\n      if (!exists) {\n        return null;\n      }\n\n      const data = await fs.readJSON(filePath);\n      return data as T;\n    } catch (error) {\n      logger.error(`Error reading ${key} from store:`, error);\n      return null;\n    }\n  }\n\n  async set<T>(key: string, value: T): Promise<void> {\n    try {\n      const filePath = path.join(this.baseDir, `${key}.json`);\n      await fs.ensureDir(path.dirname(filePath));\n\n      // Crear backup si existe archivo previo\n      if (this.autoBackup && (await fs.pathExists(filePath))) {\n        const backupPath = `${filePath}.backup`;\n        await fs.copy(filePath, backupPath);\n      }\n\n      // Escribir nuevo archivo de forma at\u00F3mica\n      const tempPath = `${filePath}.tmp`;\n      await fs.writeJSON(tempPath, value, { spaces: 2 });\n      await fs.move(tempPath, filePath, { overwrite: true });\n\n      logger.debug(`Successfully wrote ${key} to store`);\n    } catch (error) {\n      logger.error(`Error writing ${key} to store:`, error);\n      throw error;\n    }\n  }\n\n  async delete(key: string): Promise<void> {\n    try {\n      const filePath = path.join(this.baseDir, `${key}.json`);\n      if (await fs.pathExists(filePath)) {\n        await fs.remove(filePath);\n        logger.debug(`Successfully deleted ${key} from store`);\n      }\n    } catch (error) {\n      logger.error(`Error deleting ${key} from store:`, error);\n      throw error;\n    }\n  }\n\n  async getAllKeys(): Promise<string[]> {\n    try {\n      const files = await fs.readdir(this.baseDir);\n      return files\n        .filter((f) => f.endsWith('.json'))\n        .map((f) => f.replace('.json', ''));\n    } catch (error) {\n      logger.error('Error reading keys from store:', error);\n      return [];\n    }\n  }\n\n  async clear(): Promise<void> {\n    try {\n      await fs.emptyDir(this.baseDir);\n      logger.debug('Store cleared');\n    } catch (error) {\n      logger.error('Error clearing store:', error);\n      throw error;\n    }\n  }\n\n  async exists(key: string): Promise<boolean> {\n    const filePath = path.join(this.baseDir, `${key}.json`);\n    return await fs.pathExists(filePath);\n  }\n}\n\nexport default JsonStore;\n", "import logger from './logger';\n\nexport async function retry<T>(\n  fn: () => Promise<T>,\n  maxAttempts: number = 3,\n  delayMs: number = 1000,\n  multiplier: number = 2\n): Promise<T> {\n  let lastError: Error | null = null;\n\n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n    try {\n      return await fn();\n    } catch (error) {\n      lastError = error as Error;\n      logger.warn(`Attempt ${attempt}/${maxAttempts} failed: ${lastError.message}`);\n\n      if (attempt < maxAttempts) {\n        const delay = delayMs * Math.pow(multiplier, attempt - 1);\n        await new Promise((resolve) => setTimeout(resolve, delay));\n      }\n    }\n  }\n\n  throw new Error(`Failed after ${maxAttempts} attempts: ${lastError?.message}`);\n}\n\nexport function calculateTypingDelay(text: string): number {\n  const wordsPerMinute = 40;\n  const words = text.split(' ').length;\n  const baseTime = (words / wordsPerMinute) * 60 * 1000;\n\n  // Agregar variabilidad \u00B120%\n  const variability = 0.2;\n  const delay = baseTime * (1 + (Math.random() - 0.5) * variability);\n\n  // Limitar entre 1s y 8s\n  return Math.min(Math.max(delay, 1000), 8000);\n}\n\nexport function delay(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n", "import { calculateTypingDelay, delay } from '../../utils/retry';\nimport logger from '../../utils/logger';\n\nexport class TypingSimulator {\n  /**\n   * Simula el tiempo que tardar\u00EDa una persona escribiendo el texto\n   * @param text Texto a \"escribir\"\n   * @returns Promesa que se resuelve despu\u00E9s del tiempo simulado\n   */\n  async simulateTyping(text: string): Promise<void> {\n    const delayMs = calculateTypingDelay(text);\n    logger.debug(`Simulating typing delay: ${delayMs}ms for ${text.length} chars`);\n    await delay(delayMs);\n  }\n\n  /**\n   * Calcula el delay de escritura sin esperar\n   * @param text Texto a evaluar\n   * @returns Delay en milisegundos\n   */\n  getTypingDelay(text: string): number {\n    return calculateTypingDelay(text);\n  }\n}\n\nexport default new TypingSimulator();\n", "import Joi from 'joi';\nimport logger from './logger';\n\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\nexport function validatePhone(phone: string): boolean {\n  // Validar formato de tel\u00E9fono peruano (+51, 9)\n  const phoneRegex = /^(\\+51|0)?9\\d{8}$/;\n  return phoneRegex.test(phone.replace(/\\s/g, ''));\n}\n\nexport function validateCronExpression(cron: string): boolean {\n  // Validaci\u00F3n b\u00E1sica de expresi\u00F3n cron (5 campos)\n  const cronRegex = /^((\\d+,)*\\d+|\\*)(\\/\\d+)?( ((\\d+,)*\\d+|\\*)(\\/\\d+)?){4}$/;\n  return cronRegex.test(cron);\n}\n\nexport function validateUrl(url: string): boolean {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport function validateSessionPhone(phone: string): boolean {\n  // Validar formato de tel\u00E9fono para sesi\u00F3n (sin +)\n  const sessionPhoneRegex = /^51[0-9]{9}$/;\n  return sessionPhoneRegex.test(phone.replace(/\\D/g, ''));\n}\n\nexport function validateCronJob(data: any): { valid: boolean; errors?: ValidationError[] } {\n  const schema = Joi.object({\n    name: Joi.string().required().min(3).max(100),\n    url: Joi.string().required().uri(),\n    cronExpression: Joi.string()\n      .required()\n      .custom((value, helpers) => {\n        if (!validateCronExpression(value)) {\n          return helpers.error('any.invalid');\n        }\n        return value;\n      })\n      .messages({ 'any.invalid': 'Expresi\u00F3n cron inv\u00E1lida' }),\n    company: Joi.string().valid('constroad', 'altavia').required(),\n    isActive: Joi.boolean().default(true),\n    timeout: Joi.number().default(30000).min(5000).max(300000),\n    retryPolicy: Joi.object({\n      maxRetries: Joi.number().default(3).min(0).max(10),\n      backoffMultiplier: Joi.number().default(2).min(1).max(5),\n    }),\n  });\n\n  try {\n    const { error, value } = schema.validate(data, { abortEarly: false });\n\n    if (error) {\n      const errors: ValidationError[] = error.details.map((detail) => ({\n        field: detail.path.join('.'),\n        message: detail.message,\n      }));\n      return { valid: false, errors };\n    }\n\n    return { valid: true };\n  } catch (err) {\n    logger.error('Validation error:', err);\n    return { valid: false };\n  }\n}\n\nexport function validateMessage(message: any): boolean {\n  return (\n    message &&\n    typeof message === 'object' &&\n    (message.conversation || message.extendedTextMessage?.text)\n  );\n}\n", "import logger from '../../utils/logger';\nimport agentService from './agent.service';\nimport conversationManager from './conversation.manager';\nimport typingSimulator from './typing-simulator';\nimport { WhatsAppMessage, Conversation } from '../../types';\nimport { validateMessage } from '../../utils/validators';\n\nexport class MessageListener {\n  private activeConversations: Map<string, Conversation> = new Map();\n\n  async handleIncomingMessage(\n    message: WhatsAppMessage,\n    sessionPhone: string,\n    whatsAppClient: any\n  ): Promise<void> {\n    try {\n      // 1. Filtrar mensajes propios\n      if (message.key.fromMe) {\n        return;\n      }\n\n      // 2. Validar que es un mensaje de texto\n      if (!validateMessage(message.message)) {\n        logger.debug(`Skipping non-text message from ${message.key.remoteJid}`);\n        return;\n      }\n\n      // 3. Extraer informaci\u00F3n del remitente\n      const chatId = message.key.remoteJid;\n      const messageText =\n        message.message?.conversation ||\n        message.message?.extendedTextMessage?.text ||\n        '';\n\n      if (!messageText.trim()) {\n        return;\n      }\n\n      // 4. Ignorar si es un grupo y el bot no est\u00E1 habilitado\n      const isGroup = chatId.endsWith('@g.us');\n      if (isGroup && !this.isGroupEnabled(chatId)) {\n        logger.debug(`Group ${chatId} not enabled for bot`);\n        return;\n      }\n\n      logger.info(\n        `Incoming message from ${chatId} (session: ${sessionPhone}): ${messageText.substring(0, 50)}`\n      );\n\n      // 5. Obtener o crear conversaci\u00F3n\n      const conversation = await conversationManager.getOrCreate(chatId, sessionPhone);\n\n      // 6. Verificar si est\u00E1 en handoff a humano\n      if (conversation.state === 'waiting_human') {\n        await this.notifyHumanAgent(conversation, messageText);\n        return;\n      }\n\n      // 7. Agregar mensaje al historial\n      conversation.messageHistory.push({\n        role: 'user',\n        content: messageText,\n        timestamp: new Date().toISOString(),\n      });\n\n      // 8. Procesar con IA\n      await this.processWithAI(conversation, messageText, whatsAppClient);\n    } catch (error) {\n      logger.error('Error handling incoming message:', error);\n    }\n  }\n\n  private async processWithAI(\n    conversation: Conversation,\n    message: string,\n    whatsAppClient: any\n  ): Promise<void> {\n    try {\n      // 1. Simular \"escribiendo...\"\n      await whatsAppClient.sendPresenceUpdate('composing', conversation.chatId);\n\n      // 2. Obtener respuesta del agente\n      const response = await agentService.generateResponse(conversation, message);\n\n      // 3. Simular tiempo de escritura humano\n      await typingSimulator.simulateTyping(response.text);\n\n      // 4. Enviar respuesta\n      await whatsAppClient.sendMessage(conversation.chatId, {\n        text: response.text,\n      });\n\n      logger.info(\n        `Response sent to ${conversation.chatId}: ${response.text.substring(0, 50)}`\n      );\n\n      // 5. Actualizar conversaci\u00F3n\n      conversation.messageHistory.push({\n        role: 'assistant',\n        content: response.text,\n        timestamp: new Date().toISOString(),\n      });\n\n      conversation.lastMessageAt = new Date().toISOString();\n\n      // 6. Actualizar estado si es necesario\n      if (response.nextState) {\n        conversation.state = response.nextState;\n      }\n\n      // 7. Guardar conversaci\u00F3n\n      await conversationManager.save(conversation);\n\n      // 8. Detener \"escribiendo...\"\n      await whatsAppClient.sendPresenceUpdate('paused', conversation.chatId);\n    } catch (error) {\n      logger.error('Error processing message with AI:', error);\n      await this.sendErrorMessage(conversation.chatId, whatsAppClient);\n    }\n  }\n\n  private isGroupEnabled(groupId: string): boolean {\n    // Por ahora todos los grupos est\u00E1n habilitados\n    // En el futuro se puede hacer m\u00E1s sofisticado\n    return true;\n  }\n\n  private async notifyHumanAgent(\n    conversation: Conversation,\n    message: string\n  ): Promise<void> {\n    logger.info(\n      `New message for human agent in conversation ${conversation.chatId}: ${message}`\n    );\n    // Aqu\u00ED ir\u00EDa l\u00F3gica para notificar a un asesor humano\n    // Por ejemplo, enviar webhook, email, etc.\n  }\n\n  private async sendErrorMessage(chatId: string, whatsAppClient: any): Promise<void> {\n    try {\n      await whatsAppClient.sendMessage(chatId, {\n        text: 'Disculpa, tuve un problema procesando tu mensaje. \u00BFPodr\u00EDas repetirlo?',\n      });\n    } catch (error) {\n      logger.error('Error sending error message:', error);\n    }\n  }\n}\n\nexport default new MessageListener();\n", "import { Request, Response, NextFunction } from 'express';\nimport connectionManager from '../../whatsapp/baileys/connection.manager';\nimport logger from '../../utils/logger';\nimport { HTTP_STATUS } from '../../config/constants';\nimport { CustomError } from '../middlewares/errorHandler';\n\nexport async function createSession(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { phoneNumber } = req.body;\n\n    if (!phoneNumber) {\n      const error: CustomError = new Error('phoneNumber is required');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    logger.info(`Creating session for ${phoneNumber}`);\n\n    const socket = await connectionManager.createConnection(phoneNumber);\n\n    res.status(HTTP_STATUS.CREATED).json({\n      success: true,\n      data: {\n        phoneNumber,\n        status: connectionManager.getConnectionStatus(phoneNumber),\n        qr: connectionManager.getQRCode(phoneNumber),\n      },\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function getSessionStatus(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { phoneNumber } = req.params;\n\n    if (!phoneNumber) {\n      const error: CustomError = new Error('phoneNumber is required');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    const status = connectionManager.getConnectionStatus(phoneNumber);\n    const qr = connectionManager.getQRCode(phoneNumber);\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      data: {\n        phoneNumber,\n        status,\n        isConnected: connectionManager.isConnected(phoneNumber),\n        ...(qr && { qr }),\n      },\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function disconnectSession(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { phoneNumber } = req.params;\n\n    if (!phoneNumber) {\n      const error: CustomError = new Error('phoneNumber is required');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    await connectionManager.disconnect(phoneNumber);\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      message: `Session ${phoneNumber} disconnected`,\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function getAllSessions(req: Request, res: Response, next: NextFunction) {\n  try {\n    const connections = connectionManager.getAllConnections();\n    const sessions = Array.from(connections.keys()).map((phone) => ({\n      phoneNumber: phone,\n      status: connectionManager.getConnectionStatus(phone),\n      isConnected: connectionManager.isConnected(phone),\n    }));\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      data: {\n        total: sessions.length,\n        sessions,\n      },\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n", "import { Router } from 'express';\nimport * as jobsController from '../controllers/jobs.controller';\nimport { jobsLimiter } from '../middlewares/rateLimiter';\n\nconst router = Router();\n\n// POST /api/jobs - Crear nuevo cron job\nrouter.post('/', jobsLimiter, jobsController.createJob);\n\n// GET /api/jobs - Obtener todos los jobs\nrouter.get('/', jobsController.getAllJobs);\n\n// GET /api/jobs/:id - Obtener job espec\u00EDfico\nrouter.get('/:id', jobsController.getJob);\n\n// PATCH /api/jobs/:id - Actualizar job\nrouter.patch('/:id', jobsController.updateJob);\n\n// DELETE /api/jobs/:id - Eliminar job\nrouter.delete('/:id', jobsController.deleteJob);\n\n// POST /api/jobs/:id/run - Ejecutar job inmediatamente\nrouter.post('/:id/run', jobsController.runJobNow);\n\nexport default router;\n", "import cron from 'node-cron';\nimport axios from 'axios';\nimport logger from '../utils/logger';\nimport JsonStore from '../storage/json.store';\nimport { CronJobData } from '../types';\nimport { validateCronExpression } from '../utils/validators';\nimport { config } from '../config/environment';\nimport { retry } from '../utils/retry';\nimport path from 'path';\n\ninterface ScheduledTask {\n  task: cron.ScheduledTask;\n  data: CronJobData;\n}\n\nexport class JobScheduler {\n  private store: JsonStore;\n  private scheduledTasks: Map<string, ScheduledTask> = new Map();\n  private jobsFile: string;\n\n  constructor() {\n    this.jobsFile = config.jobs.storageFile;\n    this.store = new JsonStore({\n      baseDir: path.dirname(this.jobsFile),\n      autoBackup: true,\n    });\n  }\n\n  async initialize(): Promise<void> {\n    try {\n      logger.info('Initializing Job Scheduler...');\n      const jobs = await this.loadJobs();\n      \n      for (const job of jobs) {\n        if (job.isActive) {\n          await this.scheduleJob(job);\n        }\n      }\n\n      logger.info(`Loaded and scheduled ${jobs.length} cron jobs`);\n    } catch (error) {\n      logger.error('Error initializing Job Scheduler:', error);\n    }\n  }\n\n  async createJob(jobData: Omit<CronJobData, 'id' | 'metadata'>): Promise<CronJobData> {\n    try {\n      // Validar expresi\u00F3n cron\n      if (!validateCronExpression(jobData.cronExpression)) {\n        throw new Error('Invalid cron expression');\n      }\n\n      const job: CronJobData = {\n        id: `job-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n        ...jobData,\n        metadata: {\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString(),\n          failureCount: 0,\n        },\n      };\n\n      await this.saveJob(job);\n\n      if (job.isActive) {\n        await this.scheduleJob(job);\n      }\n\n      logger.info(`Created job: ${job.id}`);\n      return job;\n    } catch (error) {\n      logger.error('Error creating job:', error);\n      throw error;\n    }\n  }\n\n  async updateJob(id: string, updates: Partial<CronJobData>): Promise<CronJobData> {\n    try {\n      const jobs = await this.loadJobs();\n      const jobIndex = jobs.findIndex((j) => j.id === id);\n\n      if (jobIndex === -1) {\n        throw new Error(`Job ${id} not found`);\n      }\n\n      const job = jobs[jobIndex];\n      const updated: CronJobData = {\n        ...job,\n        ...updates,\n        id: job.id, // No actualizar ID\n        metadata: {\n          ...job.metadata,\n          updatedAt: new Date().toISOString(),\n        },\n      };\n\n      // Desactivar tarea anterior si existe\n      const scheduled = this.scheduledTasks.get(id);\n      if (scheduled) {\n        scheduled.task.stop();\n        this.scheduledTasks.delete(id);\n      }\n\n      // Guardar y reprogramar si est\u00E1 activo\n      jobs[jobIndex] = updated;\n      await this.saveAllJobs(jobs);\n\n      if (updated.isActive) {\n        await this.scheduleJob(updated);\n      }\n\n      logger.info(`Updated job: ${id}`);\n      return updated;\n    } catch (error) {\n      logger.error('Error updating job:', error);\n      throw error;\n    }\n  }\n\n  async deleteJob(id: string): Promise<void> {\n    try {\n      const scheduled = this.scheduledTasks.get(id);\n      if (scheduled) {\n        scheduled.task.stop();\n        this.scheduledTasks.delete(id);\n      }\n\n      const jobs = await this.loadJobs();\n      const filtered = jobs.filter((j) => j.id !== id);\n      await this.saveAllJobs(filtered);\n\n      logger.info(`Deleted job: ${id}`);\n    } catch (error) {\n      logger.error('Error deleting job:', error);\n      throw error;\n    }\n  }\n\n  async runJobNow(id: string): Promise<void> {\n    try {\n      const jobs = await this.loadJobs();\n      const job = jobs.find((j) => j.id === id);\n\n      if (!job) {\n        throw new Error(`Job ${id} not found`);\n      }\n\n      logger.info(`Running job manually: ${job.name}`);\n      await this.executeJob(job);\n    } catch (error) {\n      logger.error(`Error running job ${id}:`, error);\n      throw error;\n    }\n  }\n\n  async getJob(id: string): Promise<CronJobData | null> {\n    const jobs = await this.loadJobs();\n    return jobs.find((j) => j.id === id) || null;\n  }\n\n  async getAllJobs(): Promise<CronJobData[]> {\n    return await this.loadJobs();\n  }\n\n  async getJobsByCompany(company: 'constroad' | 'altavia'): Promise<CronJobData[]> {\n    const jobs = await this.loadJobs();\n    return jobs.filter((j) => j.company === company);\n  }\n\n  private async scheduleJob(job: CronJobData): Promise<void> {\n    try {\n      if (!validateCronExpression(job.cronExpression)) {\n        throw new Error(`Invalid cron expression for job ${job.id}`);\n      }\n\n      const task = cron.schedule(job.cronExpression, async () => {\n        await this.executeJob(job);\n      });\n\n      this.scheduledTasks.set(job.id, { task, data: job });\n      logger.debug(`Scheduled job: ${job.id} - ${job.name}`);\n    } catch (error) {\n      logger.error(`Error scheduling job ${job.id}:`, error);\n    }\n  }\n\n  private async executeJob(job: CronJobData): Promise<void> {\n    try {\n      const startTime = Date.now();\n\n      logger.info(`Executing job: ${job.name} (${job.id})`);\n\n      await retry(\n        async () => {\n          const response = await axios.post(job.url, {\n            jobId: job.id,\n            jobName: job.name,\n            company: job.company,\n            executedAt: new Date().toISOString(),\n          });\n\n          return response;\n        },\n        job.retryPolicy.maxRetries,\n        1000,\n        job.retryPolicy.backoffMultiplier\n      );\n\n      const duration = Date.now() - startTime;\n\n      // Actualizar metadata\n      const jobs = await this.loadJobs();\n      const jobIndex = jobs.findIndex((j) => j.id === job.id);\n\n      if (jobIndex !== -1) {\n        jobs[jobIndex].metadata.lastRun = new Date().toISOString();\n        jobs[jobIndex].metadata.failureCount = 0;\n        await this.saveAllJobs(jobs);\n      }\n\n      logger.info(`\u2705 Job completed: ${job.name} (${duration}ms)`);\n    } catch (error) {\n      logger.error(`\u274C Job failed: ${job.name}`, error);\n\n      // Incrementar contador de fallos\n      const jobs = await this.loadJobs();\n      const jobIndex = jobs.findIndex((j) => j.id === job.id);\n\n      if (jobIndex !== -1) {\n        jobs[jobIndex].metadata.failureCount++;\n        jobs[jobIndex].metadata.lastError = (error as Error).message;\n        await this.saveAllJobs(jobs);\n      }\n    }\n  }\n\n  private async loadJobs(): Promise<CronJobData[]> {\n    try {\n      const filename = path.basename(this.jobsFile);\n      const key = filename.replace('.json', '');\n      const data = await this.store.get<{ jobs: CronJobData[] }>(key);\n      return data?.jobs || [];\n    } catch (error) {\n      logger.warn('Error loading jobs, returning empty array:', error);\n      return [];\n    }\n  }\n\n  private async saveJob(job: CronJobData): Promise<void> {\n    const jobs = await this.loadJobs();\n    const index = jobs.findIndex((j) => j.id === job.id);\n\n    if (index >= 0) {\n      jobs[index] = job;\n    } else {\n      jobs.push(job);\n    }\n\n    await this.saveAllJobs(jobs);\n  }\n\n  private async saveAllJobs(jobs: CronJobData[]): Promise<void> {\n    const filename = path.basename(this.jobsFile);\n    const key = filename.replace('.json', '');\n    \n    await this.store.set(key, {\n      version: '1.0',\n      lastModified: new Date().toISOString(),\n      jobs,\n    });\n  }\n\n  async shutdown(): Promise<void> {\n    for (const [, scheduled] of this.scheduledTasks) {\n      scheduled.task.stop();\n    }\n    this.scheduledTasks.clear();\n    logger.info('Job Scheduler shut down');\n  }\n}\n\nexport default new JobScheduler();\n", "import { Request, Response, NextFunction } from 'express';\nimport jobScheduler from '../../jobs/scheduler.service';\nimport logger from '../../utils/logger';\nimport { HTTP_STATUS } from '../../config/constants';\nimport { CustomError } from '../middlewares/errorHandler';\nimport { validateCronJob } from '../../utils/validators';\n\nexport async function createJob(req: Request, res: Response, next: NextFunction) {\n  try {\n    const validation = validateCronJob(req.body);\n\n    if (!validation.valid) {\n      const error: CustomError = new Error('Validation failed');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      error.details = validation.errors;\n      return next(error);\n    }\n\n    const job = await jobScheduler.createJob(req.body);\n\n    res.status(HTTP_STATUS.CREATED).json({\n      success: true,\n      data: job,\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function updateJob(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { id } = req.params;\n\n    const job = await jobScheduler.updateJob(id, req.body);\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      data: job,\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function deleteJob(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { id } = req.params;\n\n    await jobScheduler.deleteJob(id);\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      message: `Job ${id} deleted`,\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function getJob(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { id } = req.params;\n    const job = await jobScheduler.getJob(id);\n\n    if (!job) {\n      const error: CustomError = new Error('Job not found');\n      error.statusCode = HTTP_STATUS.NOT_FOUND;\n      return next(error);\n    }\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      data: job,\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function getAllJobs(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { company } = req.query;\n    let jobs;\n\n    if (company && (company === 'constroad' || company === 'altavia')) {\n      jobs = await jobScheduler.getJobsByCompany(company as 'constroad' | 'altavia');\n    } else {\n      jobs = await jobScheduler.getAllJobs();\n    }\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      data: {\n        total: jobs.length,\n        jobs,\n      },\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function runJobNow(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { id } = req.params;\n\n    await jobScheduler.runJobNow(id);\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      message: `Job ${id} executed`,\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n", "import { Router } from 'express';\nimport * as messageController from '../controllers/message.controller';\nimport { messageLimiter } from '../middlewares/rateLimiter';\n\nconst router = Router();\n\n// POST /api/messages - Enviar mensaje\nrouter.post('/', messageLimiter, messageController.sendMessage);\n\n// GET /api/messages/:sessionPhone/:chatId - Obtener conversaci\u00F3n espec\u00EDfica\nrouter.get('/:sessionPhone/:chatId', messageController.getConversation);\n\n// GET /api/messages/:sessionPhone - Obtener todas las conversaciones de una sesi\u00F3n\nrouter.get('/:sessionPhone', messageController.getAllConversations);\n\n// DELETE /api/messages/:sessionPhone/:chatId - Cerrar conversaci\u00F3n\nrouter.delete('/:sessionPhone/:chatId', messageController.closeConversation);\n\nexport default router;\n", "import { Request, Response, NextFunction } from 'express';\nimport connectionManager from '../../whatsapp/baileys/connection.manager';\nimport conversationManager from '../../whatsapp/ai-agent/conversation.manager';\nimport logger from '../../utils/logger';\nimport { HTTP_STATUS } from '../../config/constants';\nimport { CustomError } from '../middlewares/errorHandler';\n\nexport async function sendMessage(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { sessionPhone, chatId, message } = req.body;\n\n    if (!sessionPhone || !chatId || !message) {\n      const error: CustomError = new Error('sessionPhone, chatId, and message are required');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    const socket = connectionManager.getConnection(sessionPhone);\n    if (!socket) {\n      const error: CustomError = new Error('Session not connected');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    await socket.sendMessage(chatId, { text: message });\n\n    logger.info(`Message sent to ${chatId} via ${sessionPhone}`);\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      message: 'Message sent successfully',\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function getConversation(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { sessionPhone, chatId } = req.params;\n\n    if (!sessionPhone || !chatId) {\n      const error: CustomError = new Error('sessionPhone and chatId are required');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    const conversation = await conversationManager.get(chatId, sessionPhone);\n\n    if (!conversation) {\n      const error: CustomError = new Error('Conversation not found');\n      error.statusCode = HTTP_STATUS.NOT_FOUND;\n      return next(error);\n    }\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      data: conversation,\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function getAllConversations(\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  try {\n    const { sessionPhone } = req.params;\n\n    if (!sessionPhone) {\n      const error: CustomError = new Error('sessionPhone is required');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    const conversations = await conversationManager.getAllForSession(sessionPhone);\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      data: {\n        total: conversations.length,\n        conversations,\n      },\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function closeConversation(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { sessionPhone, chatId } = req.params;\n\n    if (!sessionPhone || !chatId) {\n      const error: CustomError = new Error('sessionPhone and chatId are required');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    await conversationManager.closeConversation(chatId, sessionPhone);\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      message: 'Conversation closed',\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n", "import { Router } from 'express';\nimport * as pdfController from '../controllers/pdf.controller';\n\nconst router = Router();\n\n// POST /api/pdf/generate - Generar PDF desde template\nrouter.post('/generate', pdfController.generatePDF);\n\n// POST /api/pdf/templates - Crear nuevo template\nrouter.post('/templates', pdfController.createTemplate);\n\n// GET /api/pdf/templates - Listar templates\nrouter.get('/templates', pdfController.listTemplates);\n\n// DELETE /api/pdf/templates/:templateId - Eliminar template\nrouter.delete('/templates/:templateId', pdfController.deleteTemplate);\n\nexport default router;\n", "import puppeteer, { Browser } from 'puppeteer';\nimport Handlebars from 'handlebars';\nimport fs from 'fs-extra';\nimport path from 'path';\nimport { randomUUID } from 'crypto';\nimport logger from '../utils/logger';\nimport { PDFGenerationRequest } from '../types';\nimport { config } from '../config/environment';\n\nexport class PDFGenerator {\n  private browser: Browser | null = null;\n  private templatesDir: string;\n  private uploadsDir: string;\n\n  constructor() {\n    this.templatesDir = config.pdf.templatesDir;\n    this.uploadsDir = config.pdf.uploadsDir;\n  }\n\n  async initialize(): Promise<void> {\n    try {\n      logger.info('Initializing PDF Generator...');\n      \n      // Asegurar que los directorios existen\n      await fs.ensureDir(this.templatesDir);\n      await fs.ensureDir(this.uploadsDir);\n\n      // Inicializar navegador\n      this.browser = await puppeteer.launch({\n        headless: true,\n        args: ['--no-sandbox', '--disable-setuid-sandbox'],\n      });\n\n      logger.info('PDF Generator initialized');\n    } catch (error) {\n      logger.error('Error initializing PDF Generator:', error);\n      throw error;\n    }\n  }\n\n  async generatePDF(request: PDFGenerationRequest): Promise<string> {\n    try {\n      if (!this.browser) {\n        throw new Error('PDF Generator not initialized');\n      }\n\n      logger.info(`Generating PDF from template: ${request.templateId}`);\n\n      // Cargar template\n      const template = await this.loadTemplate(request.templateId);\n\n      // Compilar y renderizar HTML\n      const compiled = Handlebars.compile(template);\n      const html = compiled(request.data);\n\n      // Crear PDF\n      const filename = request.filename || `pdf-${randomUUID()}.pdf`;\n      const filepath = path.join(this.uploadsDir, filename);\n\n      const page = await this.browser.newPage();\n      await page.setContent(html, { waitUntil: 'networkidle0' });\n      await page.pdf({\n        path: filepath,\n        format: 'A4',\n        margin: { top: '20px', right: '20px', bottom: '20px', left: '20px' },\n      });\n      await page.close();\n\n      logger.info(`PDF generated: ${filepath}`);\n      return filepath;\n    } catch (error) {\n      logger.error('Error generating PDF:', error);\n      throw error;\n    }\n  }\n\n  async createTemplate(id: string, name: string, htmlContent: string): Promise<void> {\n    try {\n      const filepath = path.join(this.templatesDir, `${id}.hbs`);\n      await fs.ensureDir(path.dirname(filepath));\n      await fs.writeFile(filepath, htmlContent, 'utf-8');\n\n      logger.info(`Created PDF template: ${id}`);\n    } catch (error) {\n      logger.error('Error creating PDF template:', error);\n      throw error;\n    }\n  }\n\n  async loadTemplate(templateId: string): Promise<string> {\n    try {\n      const filepath = path.join(this.templatesDir, `${templateId}.hbs`);\n\n      if (!(await fs.pathExists(filepath))) {\n        throw new Error(`Template not found: ${templateId}`);\n      }\n\n      return await fs.readFile(filepath, 'utf-8');\n    } catch (error) {\n      logger.error('Error loading template:', error);\n      throw error;\n    }\n  }\n\n  async listTemplates(): Promise<string[]> {\n    try {\n      const files = await fs.readdir(this.templatesDir);\n      return files\n        .filter((f) => f.endsWith('.hbs'))\n        .map((f) => f.replace('.hbs', ''));\n    } catch (error) {\n      logger.error('Error listing templates:', error);\n      return [];\n    }\n  }\n\n  async deleteTemplate(templateId: string): Promise<void> {\n    try {\n      const filepath = path.join(this.templatesDir, `${templateId}.hbs`);\n      if (await fs.pathExists(filepath)) {\n        await fs.remove(filepath);\n        logger.info(`Deleted template: ${templateId}`);\n      }\n    } catch (error) {\n      logger.error('Error deleting template:', error);\n      throw error;\n    }\n  }\n\n  async shutdown(): Promise<void> {\n    if (this.browser) {\n      await this.browser.close();\n      logger.info('PDF Generator shut down');\n    }\n  }\n}\n\nexport default new PDFGenerator();\n", "import { Request, Response, NextFunction } from 'express';\nimport pdfGenerator from '../../pdf/generator.service';\nimport logger from '../../utils/logger';\nimport { HTTP_STATUS } from '../../config/constants';\nimport { CustomError } from '../middlewares/errorHandler';\n\nexport async function generatePDF(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { templateId, data, filename } = req.body;\n\n    if (!templateId || !data) {\n      const error: CustomError = new Error('templateId and data are required');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    const filepath = await pdfGenerator.generatePDF({\n      templateId,\n      data,\n      filename,\n    });\n\n    res.status(HTTP_STATUS.CREATED).json({\n      success: true,\n      data: {\n        filepath,\n        filename: filename || `pdf-${Date.now()}.pdf`,\n      },\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function createTemplate(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { id, name, htmlContent } = req.body;\n\n    if (!id || !name || !htmlContent) {\n      const error: CustomError = new Error('id, name, and htmlContent are required');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    await pdfGenerator.createTemplate(id, name, htmlContent);\n\n    res.status(HTTP_STATUS.CREATED).json({\n      success: true,\n      message: `Template ${id} created`,\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function listTemplates(req: Request, res: Response, next: NextFunction) {\n  try {\n    const templates = await pdfGenerator.listTemplates();\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      data: {\n        total: templates.length,\n        templates,\n      },\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n\nexport async function deleteTemplate(req: Request, res: Response, next: NextFunction) {\n  try {\n    const { templateId } = req.params;\n\n    if (!templateId) {\n      const error: CustomError = new Error('templateId is required');\n      error.statusCode = HTTP_STATUS.BAD_REQUEST;\n      return next(error);\n    }\n\n    await pdfGenerator.deleteTemplate(templateId);\n\n    res.status(HTTP_STATUS.OK).json({\n      success: true,\n      message: `Template ${templateId} deleted`,\n    });\n  } catch (error) {\n    next(error);\n  }\n}\n"],
  "mappings": "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",
  "names": ["fs", "path", "config", "fs", "path", "err", "err2", "er", "er2", "fs", "path", "fs", "queue", "path", "options", "cb", "data", "src", "dest", "flags", "go$readdir", "mode", "retry", "fs", "buffer", "buffers", "path", "fs", "fs", "path", "fs", "path", "fs", "path", "fs", "path", "destStat", "fs", "path", "require_copy", "fs", "path", "fs", "path", "emptyDir", "path", "fs", "path", "fs", "path", "fs", "exists", "fs", "path", "fs", "require_utils", "fs", "require_jsonfile", "fs", "path", "fs", "path", "fs", "path", "require_move", "path", "dotenv", "path", "import_fs_extra", "path", "path", "path", "path", "fs", "path", "delay", "cron", "path", "fs", "Router", "path", "router", "Router", "Router", "router", "Router", "Router", "import_fs_extra", "path", "fs", "path", "router", "Router"]
}
